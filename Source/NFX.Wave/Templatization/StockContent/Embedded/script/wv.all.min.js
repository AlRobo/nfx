var WAVE=function(){function f(a,c){t in a||(a[t]={});var l=a[t];c in l||(l[c]=[]);return l[c]}function n(a){e in a||(a[e]=[]);return a[e]}function r(){var a=h.id(b.DIV_SUMMARY);if(a){var c;c='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var l=0,w=0,V;for(V in d){var q=h.id(d[V]);q&&(c+=h.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<q.STAT_FAILED_TESTS?"class="+b.CSS_CLASS_TABLEERROR:
"",Area:q.STAT_NAME,Total:q.STAT_TOTAL_TESTS,Passed:q.STAT_TOTAL_TESTS-q.STAT_FAILED_TESTS,Failed:q.STAT_FAILED_TESTS}),l+=q.STAT_TOTAL_TESTS,w+=q.STAT_FAILED_TESTS)}c+=h.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:b.CSS_CLASS_TABLETOTAL,Total:l,Passed:l-w,Failed:w});a.innerHTML=c+"</table>"}}Date.now||(Date.now=function(){return(new Date).getTime()});var h={UNDEFINED:"undefined",falseness:function(){return!1},falsefunc:function(){return!1},
arrayDelete:function(a,c){for(var l in a)if(a[l]==c)return a.splice(l,1),!0;return!1},arrayShallowCopy:function(a){var c=[];if(a&&0<a.length)for(var l=0,w=a.length;l<w;l++)c.push(a[l]);return c},arrayClear:function(a){for(;0<a.length;)a.pop()}};h.inArray=Array.prototype.indexOf?function(a,c){return-1!=a.indexOf(c)}:function(a,c){for(var l=a.length;l--;)if(a[l]===c)return!0;return!1};h.isObject=function(a){return"undefined"==typeof a?!1:a===Object(a)&&!h.isArray(a)&&!h.isFunction(a)};h.isArray=function(a){return"undefined"==
typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};h.isFunction=function(a){return"function"==typeof a};h.isMapOrArray=function(a){return a===Object(a)&&!h.isFunction(a)};h.overrideFunction=function(a,c){return function(){this.baseFunction=a;return c.apply(this,arguments)}};h.extend=function(a,c,l){if(l)for(w in c)c.hasOwnProperty(w)&&!a.hasOwnProperty(w)&&(a[w]=c[w]);else for(var w in c)c.hasOwnProperty(w)&&(a[w]=c[w]);return a};h.clone=function(a){return JSON.parse(JSON.stringify(a))};
h.isSame=function(a,c){if(2>arguments.length)return!1;if(null===a&&null===c)return!0;if(null===a||null===c||typeof a!=typeof c)return!1;if("function"===typeof a.getTime)return a.getTime()===c.getTime();if(h.isMapOrArray(a)){if(a.length!=c.length||Object.keys(a).length!=Object.keys(c).length)return!1;for(var l in a)if(!h.isSame(a[l],c[l]))return!1;return!0}return a===c};h.propStrAsObject=function(a,c){if(null!==a&&!h.strEmpty(c)&&a.hasOwnProperty(c)){var l=a[c];if(null!==l&&"string"===typeof l)try{a[c]=
JSON.parse(l)}catch(w){throw console.error("WV.propStrAsObject, error parsing property '"+c+"' string as JSON: "+l),w;}}};h.intValid=function(a){if(!a||0==a.length)return!1;a=parseInt(a);return isNaN(a)?!1:!0};h.intValidPositive=function(a){if(!a||0==a.length)return!1;a=parseInt(a);return isNaN(a)||0>=a?!1:!0};h.intValidPositiveOrZero=function(a){if(0!=a&&!a||0==a.length)return!1;a=parseInt(a);return isNaN(a)||0>a?!1:!0};h.strEmpty=function(a){return!a||0===a.length||/^\s*$/.test(a)};h.strDefault=
function(a,c){return"undefined"===typeof a||null===a?"undefined"===typeof c||null===c?"":c:a};h.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};h.strLTrim=function(a){return a.replace(/^\s+/,"")};h.strRTrim=function(a){return a.replace(/\s+$/,"")};h.strTrunc=function(a,c,l){if(!a||a.length<=c)return a;l=l||"...";return a.substr(0,c-l.length)+l};h.strCaps=function(a,c){if(h.strEmpty(a))return a;for(var l,w="",b=!1,q=0;q<a.length;q++)l=a[q]," "===l||"."===l?(b=!0,w+=l):(w=b||0===q?w+l.toUpperCase():
w+(c?l.toLowerCase():l),b=!1);return w};var A="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");h.siNum=function(a,c){"undefined"===typeof c&&(c=2);if(0==a)return a.toFixed(c);var l=a;0>a&&(l=-l);for(var w=0,b=l.toFixed(c)+A[w+8];1E3<=l;)l/=1E3,w++;for(;1>l;)l*=1E3,w--;b=Math.pow(10,c);for(l=Math.round(l*b)/b;1E3<=l;)l/=1E3,w++;for(;1>l;)l*=1E3,w--;0>a&&(l=-l);return b=l.toFixed(c)+A[w+8]};h.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};h.strStartsWith=
function(a,c,l){return l?a.slice(0,c.length)==c:a.slice(0,c.length).toLowerCase()==c.toLowerCase()};h.strEndsWith=function(a,c,l){return l?a.slice(-c.length)==c:a.slice(-c.length).toLowerCase()==c.toLowerCase()};h.strEnsureEnding=function(a,c){return a+(a.slice(-c.length)==c?"":c)};h.strContains=function(a,c,l){return l?-1<a.indexOf(c):-1<a.toLowerCase().indexOf(c.toLowerCase())};h.strSame=function(a,c){return"undefined"===typeof a||"undefined"===typeof c||null===a||null===c?!1:h.strTrim(a).toLowerCase()===
h.strTrim(c).toLowerCase()};h.strOneOf=function(a,c,l){if(null===a||null===c||!h.isArray(c))return!1;l||(l="|");a=l+h.strTrim(a).toLowerCase()+l;return 0<=(l+c.join(l)+l).toLowerCase().indexOf(a)};var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};h.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return C[a]})};h.strHTMLTemplate=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,w){return h.strEscapeHTML(c[w])})};h.strTemplate=
function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,w){return c[w]})};h.strIsEMail=function(a){if(h.strEmpty(a))return!1;var c=a.indexOf("@");if(1>c||c==a.length-1||0<=a.indexOf("@",c+1))return!1;var l=a.lastIndexOf(".");if(!(l>c+2&&l+2<=a.length))return!1;for(l=0;l<a.length;l++)if(c=a[l],"."!=c&&"@"!=c&&"-"!=c&&"_"!=c&&!h.isValidScreenNameLetterOrDigit(c))return!1;return!0};h.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=
a&&"\u044f">=a||0<="\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
h.isValidScreenNameLetterOrDigit=function(a){return h.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};h.isValidScreenNameSeparator=function(a){return"."==a||"-"==a||"_"==a};h.strIsScreenName=function(a){if(h.strEmpty(a))return!1;a=h.strTrim(a);if(0==a.length)return!1;for(var c=!1,l,w=0;w<a.length;w++)if(l=a[w],0==w){if(!h.isValidScreenNameLetter(l))return!1}else if(h.isValidScreenNameSeparator(l)){if(c)return!1;c=!0}else{if(!h.isValidScreenNameLetterOrDigit(l))return!1;c=!1}return!c};h.strNormalizeUSPhone=
function(a){if(h.strEmpty(a))return"";a=h.strTrim(a);if(0==a.length)return"";if(h.strStartsWith(a,"+",!0))return a;for(var c=!1,l=!1,w="",b="",q="",d,e=0;e<a.length;e++)if(d=a[e],c||"("!=d||0!=w.length)if(c&&")"==d)c=!1;else{c&&3==w.length&&(c=!1);if(0<b.length&&!l){if("x"==d||"X"==d||"."==d&&6<b.length){l=!0;continue}var g=a.substring(e).toUpperCase();if(h.strStartsWith(g,"EXT",!1)&&7<=b.length){l=!0;e+=2;continue}if(h.strStartsWith(g,"EXT.",!1)&&7<=b.length){l=!0;e+=3;continue}}h.charIsAZLetterOrDigit(d)&&
(c?w+=d:l?q+=d:b+=d)}else c=!0;for(;7>b.length;)b+="?";0==w.length&&(10<=b.length?(w=b.substring(0,3),b=b.substring(3)):w="???");7<b.length&&0==q.length&&(q=b.substring(7),b=b.substring(0,7));b=b.substring(0,3)+"-"+b.substring(3);0<q.length&&(q="x"+q);return"("+w+") "+b+q};h.LOCALIZER={eng:{},rus:{},deu:{}};h.strLocalize=function(a,c,l,b){if(4>arguments.length||h.strEmpty(a)||h.strEmpty(b))return b;h.strEmpty(c)&&(c="--ANY-SCHEMA--");h.strEmpty(l)&&(l="--ANY-FIELD--");var d=h.LOCALIZER;if(!d.hasOwnProperty(a))return b;
d=d[a];if(d.hasOwnProperty(c))d=d[c];else{if(!d.hasOwnProperty("--ANY-SCHEMA--"))return b;d=d["--ANY-SCHEMA--"]}if(d.hasOwnProperty(l))d=d[l];else{if(!d.hasOwnProperty("--ANY-FIELD--"))return b;d=d["--ANY-FIELD--"]}return d.hasOwnProperty(b)?d[b]:b};h.toISODateTimeString=function(a){function c(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"};h.toUSDateTimeString=function(a){function c(a){return 10>
a?"0"+a:a}return c(a.getMonth()+1)+"/"+c(a.getDate())+"/"+c(a.getFullYear())+" "+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())};h.toUSDateString=function(a){function c(a){return 10>a?"0"+a:a}return c(a.getMonth()+1)+"/"+c(a.getDate())+"/"+c(a.getFullYear())};h.toSeconds=function(a){var c=0,l=a.match(/(\d+)\s*d/),b=a.match(/(\d+)\s*h/),d=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);l&&(c+=86400*parseInt(l[1]));b&&(c+=3600*parseInt(b[1]));d&&(c+=60*parseInt(d[1]));a&&(c+=parseInt(a[1]));
return c};h.genRndKey=function(a,c){var l="";h.intValidPositive(a)||(a=8);for(h.strEmpty(c)&&(c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");l.length<a;)l+=c.charAt(h.rnd(c.length));return l};var x={};h.genAutoincKey=function(a,c){var l=0;h.strEmpty(a)&&(a="Unspecified");h.intValidPositive(c)||(c=1);a in x&&(l=x[a]);var b=l;x[a]=l+c;return b};h.isScalar=function(a){return/boolean|number|string/.test(typeof a)};h.rnd=function(){var a=0,c=100;1==arguments.length?c=arguments[0]:2==arguments.length&&(a=arguments[0],
c=arguments[1]);return a+Math.floor(Math.random()*(c-a+1))};h.id=function(a){return document.getElementById(a)};h.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):!1};h.setCookie=function(a,c){var l=a+"="+escape(c)+"; path=/";document.cookie=l};h.deleteCookie=function(a){h.setCookie(a,null,{expires:-1})};h.isObjectType=function(a){return h.strOneOf(a,["object","json","map","array"])};
h.isIntType=function(a){return h.strOneOf(a,["int","integer"])};h.isRealType=function(a){return h.strOneOf(a,["float","real","double","money"])};h.isBoolType=function(a){return h.strOneOf(a,["bool","boolean","logical"])};h.isStringType=function(a){return h.strOneOf(a,"str string char[] char varchar text".split(" "))};h.isDateType=function(a){return h.strOneOf(a,["date","datetime","time","timestamp"])};h.convertScalarType=function(a,c,l,b){function d(){if("undefined"!==typeof b&&null!==b)return b;
null===c&&(c="<null>");throw"Can not convert '"+c+"' to type '"+l+"'";}if(h.strEmpty(l))return c;if(h.isObjectType(l)){if(null===c)return a?null:{};if(h.isObject(c))return c;var q=typeof c;if("boolean"===q)return c?{value:!0}:{value:!1};if(h.isFunction(c.getTime)||"number"===q)return{value:c};if("string"===q)try{return JSON.parse(c)}catch(e){return{value:c}}return d()}if(h.isIntType(l)){if(null===c)return a?null:0;q=typeof c;if("boolean"===q)return c?1:0;if(h.isFunction(c.getTime))return c.getTime();
if("number"===q||"object"===q)q="string",c=c.toString();if("string"===q){if(h.strEmpty(c))return a?null:0;a=parseInt(c);if(!isNaN(a))return a}return d()}if(h.isStringType(l)){if(null===c)return a?null:"";q=typeof c;return"string"===q?c:"boolean"===q?c?"true":"false":h.isFunction(c.getTime)?h.toUSDateTimeString(c):c.toString()}if(h.isRealType(l)){if(null===c)return a?null:0;q=typeof c;if("boolean"===q)return c?1:0;if(h.isFunction(c.getTime))return c.getTime();if("number"===q||"object"===q)q="string",
c=c.toString();if("string"===q){if(h.strEmpty(c))return a?null:0;a=parseFloat(c);if(!isNaN(a))return a}return d()}if(h.isBoolType(l))return c?!0:!1;if(h.isDateType(l)){if(null===c)return a?null:d();if("number"===typeof c)return new Date(Math.round(c));if(h.strEmpty(c)&&a)return null;a=Date.parse(c);return isNaN(a)?d():new Date(a)}return dfltOrEror()};h.EventManager={ANY_EVENT:"*",eventBind:function(a,c){if(h.strEmpty(a)||!c)return!1;var l=f(this,a);if(h.inArray(l,c))return!1;l.push(c);return!0},eventUnbind:function(a,
c){if(h.strEmpty(a)||!c)return!1;var l=f(this,a);return h.arrayDelete(l,c)},eventClear:function(a){if(h.strEmpty(a))return this[t]={},!0;a=f(this,a);h.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(h.strEmpty(a)||0!=this.eventInvocationSuspendCount)return!1;var c=Array.prototype.slice.call(arguments,1);c.splice(0,0,this);var l=f(this,a),b;for(b in l)l[b].apply(this,c);c.splice(0,0,a);l=f(this,"*");for(b in l)l[b].apply(this,c);l=n(this);for(b in l){var d=l[b],q=d.eventNotify;
WAVE.isFunction(q)&&q.apply(d,c)}return!0},eventSinkBind:function(a){if(null===a)return!1;var c=n(this);if(h.inArray(c,a))return!1;c.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var c=n(this);return h.arrayDelete(c,a)},eventSinkClear:function(){this[e]=[]},eventSinks:function(){return n(this)}};var t="@!WAVE EVENT FUN LIST",e="@!WAVE EVENT SINK LIST",b={CSS_CLASS_AREA:"wvUTestArea",CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",CSS_CLASS_TABLEERROR:"wvUTestTableError",
CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},g=[],d={},u=!1;b.run=function(a,c,l){u||(u=!0,setTimeout(r,1E3));h.strEmpty(a)&&(a="Unspecified");var w=null;a in d?w=d[a]:(w=b.DIV_AREA_PREFIX+h.genAutoincKey("UtestingArea"),d[a]=w);var e=h.id(w);e||(e=document.createElement("div"),e.id=w,e.className=b.CSS_CLASS_AREA,document.body.appendChild(e),e.innerHTML="<h2>"+a+"</h2>",e.STAT_NAME=a,e.STAT_TOTAL_TESTS=
0,e.STAT_FAILED_TESTS=0);a="";try{g=[],e.STAT_TOTAL_TESTS+=1,l()}catch(m){e.STAT_FAILED_TESTS+=1,a=m}l=!h.strEmpty(a);var q=b.DIV_TEST_PREFIX+h.genAutoincKey("UtestingCase"),w=document.createElement("div");w.id=q;w.className=l?b.CSS_CLASS_ERROR:b.CSS_CLASS_OK;c=c="<div class='"+b.CSS_CLASS_TESTTITLE+"'>"+c+"&nbsp;&nbsp;:&nbsp;&nbsp;"+(l?"FAILED":"PASSED")+"</div>";l&&(c+="&nbsp;&nbsp;Error: "+a);if(0<g.length){c+="<pre>";for(var K in g)c+=" "+g[K];c+="</pre>"}w.innerHTML=c;e.appendChild(w)};b.testingStarted=
function(){return u};b.log=function(a){g.push("  &gt; "+a+"\n")};b.logi=function(a){g.push(a)};b.assertTrue=function(a,c){h.strEmpty(c)&&(c="Assertion not true");if(!a)throw c;};b.assertFalse=function(a,c){h.strEmpty(c)&&(c="Assertion not false");if(a)throw c;};h.UTest=b;var k={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),iPad:navigator.userAgent.match(/iPad/i),Android:navigator.userAgent.match(/Android/i),IE:-1!=navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),
WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,Safari:navigator.userAgent.match(/Safari/i)&&!window.chrome,FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),OperaMobi:navigator.userAgent.match(/Opera Mobi/i),Silk:/silk/i.test(navigator.userAgent)};k.iOS=k.iPhone||k.iPod||k.iPad;k.Mobile=k.iOS||k.Android||k.OperaMini||
k.OperaMobi||k.BlackBerry||k.WebOS||k.IEMobile||k.WinPhone||k.Silk;k.WebKit=k.Chrome||k.Safari;h.Platform=k;var m={EARTH_RADIUS_KM:6371,PI:3.14159265,PI2:6.28318531,MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,c,l,b){return Math.sqrt(Math.pow(a-l,2)+Math.pow(c-b,2))},distancePoints:function(a,c){return m.distance(a.x(),
a.y(),c.x(),c.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},azimuthRad:function(a,c,l,b){a=Math.atan2(b-c,l-a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,c){return m.azimuthRad(a.x(),a.y(),c.x(),c.y())},azimuthDeg:function(a,c,l,b){return m.azimuthRad(a,c,l,b)/6.28318531*360},azimuthDegPoints:function(a,c){return m.azimuthDeg(a.x(),a.y(),c.x(),c.y())},azimuthOfRadix:function(a,c,l,b,d){2>d&&(d=2);a=m.azimuthRad(a,c,l,b);a=m.wrapAngle(a,
3.14159265/d);return Math.floor(a/6.28318531*d)},azimuthOfRadixPoints:function(a,c,l){return m.azimuthOfRadix(a.x(),a.y(),c.x(),c.y(),l)},toRectXY:function(a,c,l,b){return new m.Rectangle(new m.Point(a,c),new m.Point(l,b))},toRectWH:function(a,c,l,b){return new m.Rectangle(new m.Point(a,c),new m.Point(a+l,c+b))},overlapAreaRect:function(a,c){var l=a.topLeft(),b=c.topLeft();return m.overlapAreaWH(l.x(),l.y(),a.width(),a.height(),b.x(),b.y(),c.width(),c.height())},overlapAreaWH:function(a,c,l,b,d,q,
e,g){a=e>=l?a<=d?a+l-d:a+l>=d+e?d+e-a:l:d<=a?d+e-a:d+e>=a+l?a+l-d:e;c=g>=b?c<=q?c+b-q:c+b>=q+g?q+g-c:b:q<=c?q+g-c:q+g>=c+b?c+b-q:g;0>a&&(a=0);0>c&&(c=0);return a*c},overlapAreaXY:function(a,c,l,b,d,q,e,g){return m.overlapAreaWH(a,c,l-a,b-c,d,q,e-d,g-q)},lineIntersectsRect:function(a,c,l,b,d,q,e,g){g=q-g;e-=d;d=-(g*d+e*q);q=g*a+e*c+d;var m=0==q?0:0<q?1:-1;q=g*a+e*b+d;if((0==q?0:0<q?1:-1)!=m)return!0;q=g*l+e*c+d;if((0==q?0:0<q?1:-1)!=m)return!0;q=g*l+e*b+d;return(0==q?0:0<q?1:-1)!=m?!0:!1},intersectionLengthRectLineXY:function(a,
c,l,b,d,q,e,g){return m.lineIntersectsRect(a,c,l,b,d,q,e,g)?m.distance(d<a?a:d>l?l:d,q<c?c:q>b?b:q,e<a?a:e>l?l:e,g<c?c:g>b?b:g):0},wrapAngle:function(a,c){c%=6.28318531;0>c&&(c=6.28318531+c);return(a+c)%6.28318531},mapDirectionToAngle:function(a){switch(a){case m.MapDirection.North:return 1.5707963275;case m.MapDirection.South:return 4.7123889825;case m.MapDirection.East:return 0;case m.MapDirection.West:return 3.141592655;case m.MapDirection.NorthEast:return.78539816375;case m.MapDirection.NorthWest:return 2.35619449125;
case m.MapDirection.SouthEast:return 5.49778714625;case m.MapDirection.SouthWest:return.625*6.28318531;default:return 0}},angleToMapDirection:function(a){a=m.wrapAngle(a,0);return 0<=a&&.392699081875>a?m.MapDirection.East:.392699081875<=a&&1.178097245625>a?m.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?m.MapDirection.North:a>=6.28318531*5/16&&2.748893573125>a?m.MapDirection.NorthWest:2.748893573125<=a&&3.534291736875>a?m.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?m.MapDirection.SouthWest:
a>=6.28318531*11/16&&5.105088064375>a?m.MapDirection.South:5.105088064375<=a&&a<6.28318531*15/16?m.MapDirection.SouthEast:m.MapDirection.East},perimeterViolationArea:function(a,c){var l=0,b=0;c.left()<a.left()?l=a.left()-c.left():c.right()>a.right()&&(l=c.right()-a.right());c.top()<a.top()?b=a.top()-c.top():c.bottom()>a.bottom()&&(b=c.bottom()-a.bottom());return l*c.height()+b*c.width()},findRayFromRectangleCenterSideIntersection:function(a,c){var b=new m.Point(a.left()+a.width()/2,a.top()+a.height()/
2),d=a.width()>a.height()?a.width():a.height();100>d&&(d=100);var e=new m.PolarPoint(d,c),d=e.toPoint(),q=0!=d.x()?d.y()/d.x():0,g=0,k=0,d=[],g=b.x()+(0!=q?(a.top()-b.y())/q:0),k=a.top();g>=a.left()&&g<=a.right()&&d.push(new m.Point(g,k));g=b.x()+(0!=q?(a.bottom()-b.y())/q:0);k=a.bottom();g>=a.left()&&g<=a.right()&&d.push(new m.Point(g,k));g=a.right();k=b.y()+q*(a.right()-b.x());k>=a.top()&&k<=a.bottom()&&d.push(new m.Point(g,k));g=a.left();k=b.y()+q*(a.left()-b.x());k>=a.top()&&k<=a.bottom()&&d.push(new m.Point(g,
k));q=new m.Point(1E6,1E6);g=1E6;e=e.toPoint();e.offset(b.x(),b.y());for(var u in d)b=d[u],k=m.distancePoints(b,e),k<g&&(q=b,g=k);return q},rotateRectAroundCircle:function(a,c,b,d,e,q){d/=2;e/=2;a+=Math.cos(q)*(d+b);c+=Math.sin(q)*(e+b);return new m.toRectXY(a-d,c-e,a+d,c+e)},getBBox:function(a){if(!a)return null;var c=a.length;if(0==c)return null;for(var b=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,g=0;g<c;g++){var k=a[g],u=k.x,k=k.y;
u<b&&(b=u);u>d&&(d=u);k<e&&(e=k);k>q&&(q=k)}return m.toRectXY(b,e,d,q)},Point:function(a,c){var b=a;this.x=function(a){"undefined"!==typeof a&&(b=a);return b};var d=c;this.y=function(a){"undefined"!==typeof a&&(d=a);return d};this.offset=function(a,c){b+=a;d+=c}}};m.Point.prototype.toPolarPoint=function(a){var c=m.distancePoints(a,this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>a&&(a=6.28318531+a);return new m.PolarPoint(c,a)};m.Point.prototype.isEqual=function(a){return this.x()==a.x()&&this.y()==
a.y()};m.Point.prototype.toString=function(){return"("+this.x().toString()+" , "+this.y().toString()+")"};m.PolarPoint=function(a,c){function b(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var d=a;this.radius=function(a){"undefined"!==typeof a&&(d=a);return d};var e=b(c);this.theta=function(a){"undefined"!==typeof a&&(e=b(a));return e};this.toPoint=function(){return new m.Point(d*Math.cos(e),d*Math.sin(e))}};m.PolarPoint.prototype.isEqual=function(a){return this.radius()==
a.radius()&&this.theta()==a.theta()};m.PolarPoint.prototype.toString=function(){return"("+this.radius().toString()+" , "+m.radToDeg(this.theta()).toString()+"\u00b0)"};m.Rectangle=function(a,c){var b=this,d=a,e=c;this.corner1=function(a){"undefined"!==typeof a&&(d=a);return d};this.corner2=function(a){"undefined"!==typeof a&&(e=a);return e};this.topLeft=function(){var a=d.x(),c=e.x();c<a&&(a=c);var b=d.y(),c=e.y();c<b&&(b=c);return new m.Point(a,b)};this.bottomRight=function(){var a=d.x(),c=e.x();
c>a&&(a=c);var b=d.y(),c=e.y();c>b&&(b=c);return new m.Point(a,b)};this.width=function(){return Math.abs(d.x()-e.x())};this.height=function(){return Math.abs(d.y()-e.y())};this.left=function(){var a=d.x(),c=e.x();c<a&&(a=c);return a};this.right=function(){var a=d.x(),c=e.x();c>a&&(a=c);return a};this.top=function(){var a=d.y(),c=e.y();c<a&&(a=c);return a};this.bottom=function(){var a=d.y(),c=e.y();c>a&&(a=c);return a};this.centerPoint=function(){return new m.Point(b.left()+b.width()/2,b.top()+b.height()/
2)};this.square=function(){return b.width()*b.height()};this.contains=function(a){var c=b.topLeft(),d=b.bottomRight(),e=a.x();a=a.y();return e>=c.x()&&e<=d.x()&&a>=c.y()&&a<=d.y()}};m.Rectangle.prototype.isEqual=function(a){return this.left()==a.left()&&this.top()==a.top()&&this.width()==a.width()&&this.height()==a.height()};m.Rectangle.prototype.toString=function(){return"("+this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};m.vectorizeBalloon=
function(a,c,b){var d=[],e=new m.Point(a.left()+a.width()/2,a.top()+a.height()/2),g=c.toPolarPoint(e),k=m.findRayFromRectangleCenterSideIntersection(a,m.wrapAngle(g.theta(),-b/2));b=m.findRayFromRectangleCenterSideIntersection(a,m.wrapAngle(g.theta(),+b/2));d.push(new m.Point(a.left(),a.top()));d.push(new m.Point(a.right(),a.top()));d.push(new m.Point(a.right(),a.bottom()));d.push(new m.Point(a.left(),a.bottom()));d.push(k);d.push(c);d.push(b);d.sort(function(a,c){var b=a.toPolarPoint(e),d=c.toPolarPoint(e);
return b.theta()>d.theta()?-1:1});return d};h.Geometry=m;h.Walkable={wSelect:function(a){var c=this,b={getWalker:function(){var b=c.getWalker(),d;return{reset:function(){b.reset()},moveNext:function(){if(!b.moveNext())return!1;d=a(b.current());return!0},current:function(){return d}}}};WAVE.extend(b,WAVE.Walkable);return b},wSelectMany:function(a){var c=this,b={getWalker:function(){var b=c.getWalker(),d,l;return{reset:function(){for(b.reset();b.moveNext();){var c=b.current();if(null!==c){d=(a?a(c):
c).getWalker();break}}},moveNext:function(){if(d&&d.moveNext())return l=d.current(),!0;for(;b.moveNext();){var c=b.current();if(null!==c&&(d=(a?a(c):c).getWalker(),d.moveNext()))return l=d.current(),!0}return!1},current:function(){return l}}}};WAVE.extend(b,WAVE.Walkable);return b},wWhere:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return{reset:function(){b.reset()},moveNext:function(){for(;b.moveNext();)if(a(b.current()))return!0;return!1},current:function(){return b.current()}}}};
WAVE.extend(b,WAVE.Walkable);return b},wAt:function(a){for(var c=this.getWalker(),b=-1;c.moveNext();)if(b++,b===a)return c.current();return null},wFirst:function(a){for(var c=this.getWalker();c.moveNext();)if(a){if(a(c.current()))return c.current()}else return c.current();return null},wFirstIdx:function(a){for(var c=this.getWalker(),b=-1;c.moveNext();)if(b++,a(c.current()))return b;return-1},wCount:function(a){for(var c=this.getWalker(),b=0;c.moveNext();)a?a(c.current())&&b++:b++;return b},wDistinct:function(a){var c=
this,b={getWalker:function(){var b=c.getWalker();return new function(){var c=[],d=WAVE.arrayWalkable(c);this.reset=function(){b.reset();c.splice(0,c.length)};this.moveNext=function(){for(;b.moveNext();)if(-1==d.wFirstIdx(function(c){return a?a(c,b.current()):c==b.current()}))return c.push(b.current()),!0;return!1};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wConcat:function(a){var c=this,b={getWalker:function(){var b=c.getWalker(),d=null;return{reset:function(){b.reset();
d=null},moveNext:function(){if(null==d){if(b.moveNext())return!0;d=a.getWalker()}return d.moveNext()},current:function(){return null==d?b.current():d.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wExcept:function(a,c){var b=this,d={getWalker:function(){var d=b.getWalker();return{reset:function(){d.reset()},moveNext:function(){for(;d.moveNext();)if(-1==a.wFirstIdx(function(a){return c?c(d.current(),a):a==d.current()}))return!0;return!1},current:function(){return d.current()}}}};WAVE.extend(d,
WAVE.Walkable);return d},wGroup:function(a,c){var b=this,d={getWalker:function(){return new function(){var d=b.wDistinct(function(c,b){return a(c)==a(b)}).getWalker();this.reset=function(){d.reset()};this.moveNext=function(){return d.moveNext()};this.current=function(){return{k:a(d.current()),v:b.wWhere(function(c){return a(c)==a(d.current())}).wSelect(function(a){return c(a)})}}}}};WAVE.extend(d,WAVE.Walkable);return d},wGroupIntoObject:function(){var a={};this.wEach(function(c){a[c.k]=c.v.wToArray()});
return a},wGroupIntoArray:function(a,c){var b=[];this.wEach(function(a){b.push({k:a.k,v:a.v.wToArray()})});return b},wGroupAggregate:function(a,c){var b=this,d={getWalker:function(){var c=b.getWalker();return{reset:function(){c.reset()},moveNext:function(){return c.moveNext()},current:function(){var b=c.current();return{k:b.k,v:b.v.wAggregate(function(c,d){return a(b.k,c,d)})}}}}};WAVE.extend(d,WAVE.Walkable);return d},wOrder:function(a){var c=this.wToArray();a||(a=function(a,c){return a<c?-1:a>c?
1:0});c.sort(a);return WAVE.arrayWalkable(c)},wTake:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return new function(){var c=0;this.reset=function(){b.reset();c=0};this.moveNext=function(){if(!(b.moveNext()&&c<a))return!1;c++;return!0};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wTakeWhile:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()&&a(b.current())?
!0:!1},current:function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wSkip:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return new function(){var c=-1;this.reset=function(){b.reset();c=-1};this.moveNext=function(){for(;b.moveNext();)if(c++,c>=a)return!0;return!1};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wAny:function(a){var c=this.getWalker();if(!a)return c.moveNext();for(;c.moveNext();)if(a(c.current()))return!0;
return!1},wAll:function(a){var c=this.getWalker();if(!a)return!c.moveNext();for(;c.moveNext();)if(!a(c.current()))return!1;return!0},wMin:function(a){a||(a=function(a,c){return a<c});var c=this.getWalker();if(!c.moveNext())return null;for(var b=c.current();c.moveNext();)a(c.current(),b)&&(b=c.current());return b},wMax:function(a){a||(a=function(a,c){return a>c});var c=this.getWalker();if(!c.moveNext())return null;for(var b=c.current();c.moveNext();)a(c.current(),b)&&(b=c.current());return b},wAggregate:function(a,
c){var b=c;this.wEach(function(c){b=a(b,c)});return b},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,b){return a+b},a)},wEqual:function(a,c){var b=this.getWalker(),d=a.getWalker();do{var e=b.moveNext(),g=d.moveNext();if(!e&&!g)return!0;if(e!=g)return!1;e=b.current();g=d.current();if(!c){if(e!=g)return!1}else if(!c(e,g))return!1}while(1)},wToArray:function(){for(var a=this.getWalker(),c=[];a.moveNext();)c.push(a.current());return c},wEach:function(a){for(var c=this.getWalker(),
b=0;c.moveNext();)a(c.current(),b++);return this},wWMA:function(a){var c=this;"undefined"==typeof a&&(a=.5);var b={getWalker:function(){var b=c.getWalker(),d=null,e={s:-1,a:0};return{reset:function(){d=null;e={s:-1,a:0};b.reset()},moveNext:function(){if(!b.moveNext())return!1;e.s=b.current().s;var c=b.current().a;e.a=0==e.s?c:(1-a)*c+a*d;d=e.a;return!0},current:function(){return e},samplingRate:function(){return b.samplingRate?b.samplingRate():2}}}};WAVE.extend(b,WAVE.Walkable);return b},wHarmonicFrequencyFilter:function(a,
c){var b=this;"undefined"==typeof a&&(a=1);"undefined"==typeof c&&(c=1);1.0001>a&&(a=1.0001);1E-4>c&&(c=1E-4);var d={getWalker:function(){var d=b.getWalker(),e=0,g={s:-1,a:0},k=0,m=0;return{reset:function(){m=k=e=0;g={s:-1,a:0};d.reset()},moveNext:function(){if(!d.moveNext())return!1;g.s=d.current().s;var b=d.current().a,l=b-m;m=b;k+=(l-c*e)/a;k*=.98;g.a=e+k;e=g.a;return!0},current:function(){return g},samplingRate:function(){return d.samplingRate?d.samplingRate():2}}}};WAVE.extend(d,WAVE.Walkable);
return d},wConstLinearSampling:function(a){var c=this,b={getWalker:function(){a=a||1;var b=c.getWalker(),d=!1,e=null,l=a/2,g=0,k,m,u,f=[],t={};return new function(){this.reset=function(){f.splice(0,f.length);g=0;d=!1;e=null;b.reset()};this.moveNext=function(){function c(a,b){for(var d=0;d<f.length;d++){var e=f[d].s;if(e>a&&e<=b)return!0}return!1}function G(){if(b.moveNext())return e=b.current().s,!0;d=!0;return!1}function h(a,c){for(var b=0,d=0,e=0;e<f.length;e++){var l=f[e];l.s>a&&l.s<=c&&(b+=l.a,
d++)}return b/d}function n(a){for(;G();)if(b.current().s>=a){f.push(b.current());break}else f.push(b.current())}if(!g){if(!G())return!1;f.push(b.current());k=b.current().s;m=k-l;u=k+l;n(u);t.s=g++;var F=h(-Number.MAX_VALUE,u);t.a=F;return!0}k+=a;m=k-l;u=k+l;if(d&&e<m)return!1;t.s=g++;(function(a,c){for(;1<f.length&&f[0].s<a&&f[1].s<c;)f.shift()})(m,u);if(c(m,u))return t.a=h(m,u),!0;n(u);if(c(m,u))return t.a=h(m,u),!0;var F=f[0],r=f[1],r=(r.a-F.a)/(r.s-F.s);t.a=r*k+(F.a-r*F.s);return!0};this.current=
function(){return t}}}};WAVE.extend(b,WAVE.Walkable);return b},wSineGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var d=a.f||1,e="undefined"===typeof a.a?1:a.a,l=a.d||0,g=a.r||(b.samplingRate?b.samplingRate():2),k=a.p||0;2>g&&(g=2);var u=6.28318531/g*d,f=0,t=k,h={},b=c.getWalker();return new function(){this.reset=function(){f=0;t=k;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;h.s=f++;h.a=e*Math.sin(t)+l+b.current().a;t=m.wrapAngle(t,u);return!0};this.current=
function(){return h};this.samplingRate=function(){return g}}}};WAVE.extend(b,WAVE.Walkable);return b},wSawGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var d=a.f||1,e="undefined"===typeof a.a?1:a.a,l=a.d||0,g=a.r||(b.samplingRate?b.samplingRate():2),k=a.p||0,u=a.s||.9;2>g&&(g=2);var f=1/3.14159265/u,t=1/3.14159265/(u-1),h=1-2*u/(u-1),n=6.28318531/g*d,G=0,B=k,D={},b=c.getWalker();return new function(){this.reset=function(){G=0;B=k;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;
D.s=G++;D.a=e*(B<6.28318531*u?f*B+-1:t*B+h)+l+b.current().a;B=m.wrapAngle(B,n);return!0};this.current=function(){return D};this.samplingRate=function(){return g}}}};WAVE.extend(b,WAVE.Walkable);return b},wSquareGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var d=a.f||1,e="undefined"===typeof a.a?1:a.a,l=a.d||0,g=a.r||(b.samplingRate?b.samplingRate():2),k=a.p||0,u=a.s||.9;2>g&&(g=2);var f=-2/3.14159265/(1-u),t=1-3.14159265*f*u,h=2/3.14159265/(1-u),n=-1-3.14159265*h*
(1+u),G=6.28318531/g*d,B=0,D=k,F={},b=c.getWalker();return new function(){this.reset=function(){B=0;D=k;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;F.s=B++;F.a=e*(3.14159265>D?D<3.14159265*u?1:f*D+t:D<3.14159265+3.14159265*u?-1:h*D+n)+l+b.current().a;D=m.wrapAngle(D,G);return!0};this.current=function(){return F};this.samplingRate=function(){return g}}}};WAVE.extend(b,WAVE.Walkable);return b},wRandomGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var e=
"undefined"===typeof a.a?1:a.a,g=a.r||(b.samplingRate?b.samplingRate():2);2>g&&(g=2);var l=0,k={},d=b.getWalker();return new function(){this.reset=function(){d.reset();l=0};this.moveNext=function(){if(!d.moveNext())return!1;k.s=l++;k.a=d.current().a+2*e*(Math.random()-.5);return!0};this.current=function(){return k};this.samplingRate=function(){return g}}}};WAVE.extend(d,WAVE.Walkable);return d}};h.signalConstSrc=function(a){function b(){a=a||{};var c=a.a||0,d=a.qty,e=a.r||2;2>e&&(e=2);var g=0,l={};
this.reset=function(){g=0};this.moveNext=function(){if(d&&g>=d)return!1;l.s=g;l.a=c;g++;return!0};this.current=function(){return l};this.samplingRate=function(){return e}}var d={getWalker:function(){return new b}};WAVE.extend(d,WAVE.Walkable);return d};h.arrayWalkable=function(a){var b=function(){var b=-1;this.reset=function(){b=-1};this.moveNext=function(){return++b<a.length};this.current=function(){return 0>b||b>=a.length?null:a[b]}},d={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(d,
WAVE.Walkable);return d};h.groupWalkable=function(a){var b=function(){var b=-1,c=null;this.reset=function(){b=-1;c=null};this.moveNext=function(){if(++b<a.length){var d=a[b];c={k:d.k,v:WAVE.arrayWalkable(d.v)};return!0}return!1};this.current=function(){return c}},d={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(d,WAVE.Walkable);return d};h.SVG=function(){var a={createCircle:function(b,d,e,g){g=g||{};g.cx=b;g.cy=d;g.r=e;return a.createShape("circle",g)},createRect:function(b,d,e,
g,k){k=k||{};k.x=b;k.y=d;k.width=e;k.height=g;return a.createShape("rect",k)},createLine:function(b,d,e,g,k){k=k||{};k.x1=b;k.y1=d;k.x2=e;k.y2=g;return a.createShape("line",k)},createPath:function(b){return a.createShape("path",b)},createText:function(b,d,e,g){g=g||{};g.x=d;g.y=e;d=a.createShape("text",g);b=document.createTextNode(b);d.appendChild(b);return d},createGroup:function(b){return a.createShape("g",b)},createMarker:function(a,b){var d=this.createShape("marker",a),e;for(e in b)d.appendChild(b[e]);
return d},createDefs:function(a){var b=this.createShape("defs"),d;for(d in a)b.appendChild(a[d]);return b},createUse:function(b,d,e){d=a.createShape("use",{x:d,y:e});d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+b);return d},createClipPath:function(b,d,e){e=e||{};e.id=b;b=a.createShape("clipPath",e);for(var g in d)b.appendChild(d[g]);return b},createShape:function(a,b){var d=document.createElementNS("http://www.w3.org/2000/svg",a),e;for(e in b)try{d.setAttribute(e,b[e])}catch(g){console.error(g)}return d}};
return a}();return h}();
WAVE.RecordModel=function(){var f={UNDEFINED:"undefined",FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",
EVT_RECORD_LOAD:"record-load",EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",
KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm"},n=[];f.records=function(){return WAVE.arrayShallowCopy(n)};f.isDirty=function(){for(var f in n)if(n[f].isGUIModified())return!0;return!1};f.Record=function(r,h){if(!r)throw"Record.ctor(need id+fieldFunc or initObject)";var A=this,C=!1;WAVE.extend(A,
WAVE.EventManager);this.eventInvoke(f.EVT_RECORD_LOAD,f.EVT_PHASE_BEFORE);var x=null,t=null,e="unspecified",b="";WAVE.isObject(r)&&r.fields?(x=r.ID,t=r.ISOLang,r.__FormMode&&(e=r.__FormMode),r.__CSRFToken&&(b=r.__CSRFToken)):(x=r.toString(),r=null);var g=WAVE.strEmpty(x)?WAVE.genRndKey(16):x,d=WAVE.strEmpty(t)?"eng":t,u=[],k=!1,m=null;this.ID=function(){return g};this.ISOLang=function(){return d};this.formMode=function(){return e};this.csrfToken=function(){return b};this.loaded=function(){return C};
this.fields=function(){return WAVE.arrayShallowCopy(u)};this.data=function(a,d){var g={},k;for(k in u){var m=u[k];a&&!m.isModified()&&!m.isGUIModified()||!d&&!m.stored()||(g[m.name()]=m.value())}WAVE.strEmpty(e)||"unspecified"==e||(g.__FormMode=e);WAVE.strEmpty(b)||(g.__CSRFToken=b);return g};this.fieldByName=function(a){if(WAVE.strEmpty(a))return null;for(var b in u){var d=u[b];if(WAVE.strSame(d.name(),a))return d}return null};this.allValidationErrors=function(){var a=[];null!=m&&a.push(m);for(var b in u){var d=
u[b].validationError();null!=d&&a.push(d)}return a};this.allValidationErrorStrings=function(){var a="",b=this.allValidationErrors(),d;for(d in b)a+=b[d].toString()+"\n";return a};this.validate=function(){k=!1;m=null;var a=k=!0,b;for(b in u)u[b].validate()||(a=!1);if(a)try{A.eventInvoke(f.EVT_VALIDATE)}catch(d){m=d,a=!1}A.eventInvoke(f.EVT_VALIDATED);return a};this.validated=function(){return k};this.validationError=function(){return m};this.valid=function(){return k&&null===m&&this.fieldsValid()};
this.fieldsValidated=function(){for(var a in u)if(!u[a].validated())return!1;return!0};this.fieldsValid=function(){for(var a in u)if(!u[a].valid())return!1;return!0};this.isModified=function(){for(var a in u)if(u[a].isModified())return!0;return!1};this.isGUIModified=function(){for(var a in u)if(u[a].isGUIModified())return!0;return!1};this.resetModified=function(){for(var a in u){var b=u[a];b.resetModified();b.resetGUIModified()}return!1};this.resetSchema=function(){for(var a in u)u[a].resetSchema()};
this.applyDefaultValue=function(a){for(var b in u)u[b].applyDefaultValue(a)};this.latchAllEvents=function(a){this.eventInvocationSuspendCount+=a;for(var b in u)u[b].eventInvocationSuspendCount+=a};this.resetRecord=function(a){a&&A.latchAllEvents(1);try{k=!1,m=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{a&&A.latchAllEvents(-1)}for(var b in u)a=u[b],a.eventInvoke(f.EVT_FIELD_RESET,a)};this.Field=function(a){function b(){k=!1;m=null;y=!1;r=null}function d(a,b){A.eventInvoke(f.EVT_VALIDATION_DEFINITION_CHANGE,
t,a,b);t.eventInvoke(f.EVT_VALIDATION_DEFINITION_CHANGE,a,b)}function e(a,b){A.eventInvoke(f.EVT_INTERACTION_CHANGE,t,a,b);t.eventInvoke(f.EVT_INTERACTION_CHANGE,a,b)}var g=!1;if(!WAVE.isObject(a))throw"Field.ctor(fieldDef must be a map)";if(WAVE.strEmpty(a.Name))throw"Field def must have a name";if(WAVE.strEmpty(a.Type))throw"Field def must have a type";var t=this;WAVE.extend(t,WAVE.EventManager);u.push(t);var h="fld"+a.Name;A[h]=t;A.eventInvoke(f.EVT_FIELD_LOAD,t,f.EVT_PHASE_BEFORE);WAVE.propStrAsObject(a,
"LookupDict");WAVE.propStrAsObject(a,"Lookup");var p=WAVE.clone(a);WAVE.extend(p,f.FIELDDEF_DEFAULTS,!0);var v=null,n=!1,z=!1,y=!1,r=null;this.record=function(){return A};this.loaded=function(){return g};this.drop=function(){if(!A[h])return!1;this.eventInvoke(f.EVT_FIELD_DROP,f.EVT_PHASE_BEFORE);A.eventInvoke(f.EVT_FIELD_DROP,t,f.EVT_PHASE_BEFORE);WAVE.arrayDelete(u,this);delete A[h];A.eventInvoke(f.EVT_FIELD_DROP,t,f.EVT_PHASE_AFTER);this.eventInvoke(f.EVT_FIELD_DROP,f.EVT_PHASE_AFTER);return!0};
this.schemaDef=function(){return a};this.name=function(){return p.Name};this.type=function(){return p.Type};this.isTypeLogical=function(){return WAVE.strOneOf(p.Type,["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(p.LookupDict).length};this.key=function(){return p.Key};this.stored=function(){return p.Stored};this.about=function(){var a=p.Description;WAVE.strEmpty(a)&&(a=p.Name);return a};this.inferControlType=function(){return this.isTypeLogical()?f.CTL_TP_CHECK:this.isLookupDict()?
4<Object.keys(p.LookupDict).length?f.CTL_TP_COMBO:f.CTL_TP_RADIO:50<p.Size?f.CTL_TP_TEXTAREA:f.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=p.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[f.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){p=WAVE.clone(a);WAVE.extend(p,f.FIELDDEF_DEFAULTS,!0);b();d(null,null);e(null,null)};this.validate=function(){function a(b,c){return WAVE.strTemplate(WAVE.strLocalize(A.ISOLang(),"RMField","error",
b),c)}y=!0;r=null;try{if(p.Required&&(null===v||WAVE.strEmpty(v.toString())))throw a("Field '@f@' must have a value",{f:this.about()});if(null!==v&&!WAVE.strEmpty(v.toString())){var b=p.MinValue;if(null!==b)try{if(v<b)throw 1;}catch(c){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var d=p.MaxValue;if(null!==d)try{if(v>d)throw 1;}catch(c){throw a("Field '@f@' value can not be greater than '@b@'",{f:this.about(),b:d});}var e=p.Size;if(null!==e&&0<e&&v.toString().length>
e)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:e});e=p.MinSize;if(null!==e&&0<e&&v.toString().length<e)throw a("Field '@f@' value can not be shorter than @b@ characters",{f:this.about(),b:e});var g=Object.keys(p.LookupDict);if(0<g.length){var l=WAVE.convertScalarType(!1,v,"string","<unconvertible>");if(!WAVE.strOneOf(l,g))throw a("Field '@f@' value '@v@' is not allowed",{f:this.about(),v:l});}if(p.Kind==f.KIND_EMAIL){var k=WAVE.strIsEMail(v);if(!k)throw a("Field '@f@' must be a valid e-mail address",
{f:this.about()});}if(p.Kind==f.KIND_SCREENNAME&&(k=WAVE.strIsScreenName(v),!k))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",{f:this.about()});}t.eventInvoke(f.EVT_VALIDATE)}catch(c){r=c}t.eventInvoke(f.EVT_VALIDATED);return null===r};this.validationError=function(){return r};this.setExternalValidationError=function(a){null!=a&&(r=a,y=!1)};this.required=function(a){if("undefined"===typeof a||a===p.Required)return p.Required;
p.Required=a;b();d("required",a)};this.value=function(a,c){if("undefined"===typeof a)return v;var d=v,e=WAVE.convertScalarType(!0,a,p.Type,p.DefaultValue),g=WAVE.isSame(d,e);if(c)var k=e,e=this.preProcessValueFromGUI(e),g=g&&WAVE.isSame(k,e);if(g)return v;A.eventInvoke(f.EVT_DATA_CHANGE,f.EVT_PHASE_BEFORE,t,d,e);this.eventInvoke(f.EVT_DATA_CHANGE,f.EVT_PHASE_BEFORE,d,e);v=e;n=!0;c&&(z=!0);p.DeferValidation?b():this.validate();this.eventInvoke(f.EVT_DATA_CHANGE,f.EVT_PHASE_AFTER,d,e);A.eventInvoke(f.EVT_DATA_CHANGE,
f.EVT_PHASE_AFTER,t,d,e);return v};this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),p.Kind===f.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),p.Case===f.CASE_UPPER?a=a.toUpperCase():p.Case===f.CASE_LOWER?a=a.toLowerCase():p.Case===f.CASE_CAPS?a=WAVE.strCaps(a,!1):p.Case===f.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));return a};this.isNull=function(){return null===v};this.displayValue=function(){return null===v?"":WAVE.isDateType(p.Type)?p.Kind===f.KIND_DATE?
WAVE.toUSDateString(v):WAVE.toUSDateTimeString(v):v.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(p.DefaultValue);return v};this.valid=function(){return null===r};this.validated=function(){return y};this.validationError=function(){return r};this.isModified=function(){return n};this.resetModified=function(){return n=!1};this.isGUIModified=function(){return z};this.resetGUIModified=function(){var a=z;z=!1;e("GUIModified",
!1);return a};this.isEnabled=function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===p.Kind)return p.Kind;p.Kind=a;e("kind",a)};this.case=function(a){if("undefined"===typeof a||a===p.Case)return p.Case;p.Case=a;WAVE.isStringType(p.Type)&&this.value(v,!1)};this.applicable=function(a){if("undefined"===typeof a||a===p.Applicable)return p.Applicable;p.Applicable=a;e("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||a===p.Enabled)return p.Enabled;
p.Enabled=a;e("enabled",a)};this.readonly=function(a){if("undefined"===typeof a||a===p.ReadOnly)return p.ReadOnly;p.ReadOnly=a;e("readonly",a)};this.visible=function(a){if("undefined"===typeof a||a===p.Visible)return p.Visible;p.Visible=a;e("visible",a)};this.password=function(a){if("undefined"===typeof a||a===p.Password)return p.Password;p.Password=a;e("password",a)};this.deferValidation=function(a){if("undefined"===typeof a||a===p.DeferValidation)return p.DeferValidation;p.DeferValidation=a;b();
d("defervalidation",a)};this.minValue=function(a){if("undefined"===typeof a||a===p.MinValue)return p.MinValue;p.MinValue=a;b();d("minvalue",a)};this.maxValue=function(a){if("undefined"===typeof a||a===p.MaxValue)return p.MaxValue;p.MaxValue=a;b();d("maxvalue",a)};this.minSize=function(a){if("undefined"===typeof a||a===p.MinSize)return p.MinSize;p.MinSize=a;b();d("minsize",a)};this.size=function(a){if("undefined"===typeof a||a===p.Size)return p.Size;p.Size=a;b();d("size",a)};this.controlType=function(a){if("undefined"===
typeof a||a===p.ControlType)return p.ControlType;p.ControlType=a;e("controltype",a)};this.defaultValue=function(a){if("undefined"===typeof a||a===p.DefaultValue)return p.DefaultValue;p.DefaultValue=a;b();d("defaultvalue",a)};this.lookupDict=function(a){if("undefined"===typeof a)return p.LookupDict;null===a&&(a={});if(WAVE.isSame(p.DefaultValue,a))return p.LookupDict;p.LookupDict=a;b();d("lookupDict",a)};this.hint=function(a){if("undefined"===typeof a||a===p.Hint)return p.Hint;p.Hint=a;e("hint",a)};
this.marked=function(a){if("undefined"===typeof a||a===p.Marked)return p.Marked;p.Marked=a;e("marked",a)};this.description=function(a){if("undefined"===typeof a||a===p.Description)return p.Description;p.Description=a;e("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===p.Placeholder)return p.Placeholder;p.Placeholder=a;e("placeholder",a)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+"')"};g=!0;A.eventInvoke(f.EVT_FIELD_LOAD,t,
f.EVT_PHASE_AFTER)};if(r)for(var a in r.fields)x=r.fields[a],t=new this.Field(x.def),x.hasOwnProperty("val")&&t.value(x.val),x.hasOwnProperty("errorText")&&t.setExternalValidationError(x.errorText),t.resetModified();else WAVE.isFunction(h)&&h.apply(A);C=!0;n.push(this);this.eventInvoke(f.EVT_RECORD_LOAD,f.EVT_PHASE_AFTER)};f.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};f.DATA_RECVIEW_ID_ATTR="data-wv-rid";f.DATA_FIELD_NAME_ATTR="data-wv-fname";f.DATA_CTL_TP_ATTR="data-wv-ctl";
f.RecordView=function(n,h,A,C){if(WAVE.strEmpty(n))throw"RecordView.ctor(id: must specify)";if(!WAVE.isObject(h))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(A)||(A=WAVE.RecordModel.GUI);var x=A,t=this,e=[],b=null;this.ID=function(){return n};this.record=function(){return h};this.gui=function(){return x};this.rootElement=function(){return b};this.destroyViews=function(){for(;0<e.length;)e[0].destroy()};var g=null;this.buildViews=function(){b=null;this.destroyViews();for(var d=document.getElementsByTagName("form"),
e=0,k=d.length;e<k;e++){var m=d[e],a=m.getAttribute(f.DATA_RECVIEW_ID_ATTR);if(WAVE.strSame(n,a)){b=m;break}}if(null===b)for(m=document.getElementsByTagName("div"),e=0,k=m.length;e<k;e++)if(d=m[e],a=d.getAttribute(f.DATA_RECVIEW_ID_ATTR),WAVE.strSame(n,a)){b=d;break}if(null===b)throw"No 'form' or 'div' element could be found with record binding '"+f.DATA_RECVIEW_ID_ATTR+"' annotation";a=WAVE.arrayShallowCopy(b.getElementsByTagName("div"));e=0;for(k=a.length;e<k;e++)d=a[e],m=d.getAttribute(f.DATA_FIELD_NAME_ATTR),
WAVE.strEmpty(m)||(m=h.fieldByName(m),null!=m&&new this.FieldView(d,m));WAVE.strEmpty(h.formMode())&&WAVE.strEmpty(h.csrfToken())||(null==g&&(g=document.createElement("div"),g.style.display="none",b.appendChild(g)),e="",WAVE.strEmpty(h.formMode())||(e+="<input type='hidden' name='__FormMode' value='"+h.formMode()+"'>"),WAVE.strEmpty(h.csrfToken())||(e+="<input type='hidden' name='__CSRFToken' value='"+h.csrfToken()+"'>"),g.innerHTML=e)};this.views=function(){return WAVE.arrayShallowCopy(e)};this.FieldView=
function(b,g){if(!b)throw"FieldView.ctor(div: element must be passed)";if(!WAVE.isObject(g))throw"FieldView.ctor(fld: must be Record.Field)";var k=this;e.push(k);g.eventSinkBind(this);var m="fld"+g.name();t[m]=k;this.eventNotify=function(a,c,e){WAVE.strOneOf(a,[WAVE.RecordModel.EVT_DATA_CHANGE,WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===typeof e&&(e=""),e!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(b.style.visibility=
g.visible()?"visible":"hidden",x.eventNotifyFieldView(k,a,c,e)))};this.destroy=function(){b.innerHTML="";g.eventSinkUnbind(this);WAVE.arrayDelete(e,this);delete t[m]};this.recView=function(){return t};this.field=function(){return g};this.DIV=function(){return b};this.getOrInferControlType=function(){var a=b.getAttribute(f.DATA_CTL_TP_ATTR);return WAVE.strEmpty(a)?g.getOrInferControlType():a};g.visible()&&x.buildFieldViewAnew(this)};C||this.buildViews()};return f}();WAVE.GUI=function(){var f={UNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_TITLE:"wvDialogTitle",CLS_DIALOG_CONTENT:"wvDialogContent",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",
CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",
TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,TREE_SELECTION_MULTI:2,IBOX_DIV_FRAME:"wvIBoxDivFrame",IBOX_DIV_MAINIMAGE:"wvIBoxDivMainImage",IBOX_IMG_MAINIMAGE:"wvIBoxImgMainImage",IBOX_DIV_THUMBSCONTAINER:"wvIBoxDivThumbsContainer",IBOX_DIV_THUMBSNAVIGATION:"wvIBoxDivThumbsNavigation",IBOX_DIV_THUMBSIMAGESCONTAINER:"wvIBoxDivThumbsImagesContainer",IBOX_DIV_THUMB:"wvIBoxDivThumb",IBOX_DIV_THUMB_CROP:"wvIBoxDivThumbCrop",IBOX_DIV_THUMB_IMAGE:"wvIBoxDivThumbImage",STYLE_DIV_FRAME:"",STYLE_IMG_MAINIMAGE:"position: relative;",
STYLE_DIV_MAINIMAGE_V:"width: 72%;height: 100%;margin: 0 1%;overflow: hidden;",STYLE_DIV_MAINIMAGE_H:"width: 100%;height: 74%;margin: 1% 0;overflow: hidden;",STYLE_DIV_THUMBSCONTAINER_V:"width: 25%;height: 100%;",STYLE_DIV_THUMBSCONTAINER_H:"width: 100%;height: 25%;",STYLE_DIV_THUMBSNAV_V:"width: 100%;height: 5%;display: none;",STYLE_DIV_THUMBSNAV_H:"width: 5%;height: 100%;display: none;",STYLE_IMG_THUMBSNAV:"display: block;position: relative;",STYLE_DIV_THUMBSIMAGESCONTAINER_V:"width: 100%;height: 100%;overflow: hidden;",
STYLE_DIV_THUMBSIMAGESCONTAINER_H:"width: 100%;height: 100%;overflow: hidden;display: inline-block;white-space: nowrap; vertical-align: top;",STYLE_DIV_THUMB_V:"width: 100%;margin: 3px 0;",STYLE_DIV_THUMB_H:"height: 100%;margin: 0 3px;display: inline-block;vertical-align: top;",STYLE_DIV_THUMB_CROP:"overflow: hidden;position:relative;",STYLE_DIV_THUMB_IMAGE:"position: relative;",STYLE_DISABLE_MOBILE_HANDLING:"-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;",
EVT_IMAGE_CHANGED:"image-changed",POS_LEFT:"left",POS_RIGHT:"right",POS_TOP:"top",POS_BOTTOM:"bottom",DEFAULT_THUMBS_POSITION:"left",DEFAULT_IMAGE_FADEIN_TIME:500,DEFAULT_IMAGE_FADEOUT_TIME:0,DEFAULT_THUMBS_SCROLL_DELTA:.5,DEFAULT_ARROWS_OPACITY:.3,DEFAULT_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFAAAAPDw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL+bwigAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAAJcEhZcwAAFiQAABYkAZsVxhQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNvyMY98AABAiSURBVHhe7dfreuM6rkXR7vd/6NqOM1NlJ76QEgAyWGv86sgSUKLm6a/P//6YNAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByBOO4D/f+A/i5IO4Pr9xQtQDoDvr12AcAB8/Q9cUSQbAJ/+C1f1qAbAd/+H63JEA+Cr3+IXNZoB8M3v8ZsYyQD44t/xqxbFAPjeP/G7FMEA+NqPcIcSvQD41o9xjxC5APjSz3CXDrEA+MyvcKcKrQD4xq9xrwipAPjC73C3BqUA+L7vcb8EoQD4uiN4QoFOAHzbMTwjQCYAvuwonupPJQC+6ziea08kAL7qDJ7sTiMAvukcnm1OIgC+6Cye7k0hAL7nPJ5vTSAAvuYRTOisfwB8y2OY0ZgDeIkZjbUPgC95FFP66h4A3/E45rTVPAC+4hlM6qp3AHzDc5jVlAN4i1lNtQ6AL3gW03rqHADf7zzmteQABjCvpcYB8PUiMLGjvgHw7WIwsyEHMISZDbUNgC8Xhan9dA2A7xaHue04gEHMbadpAHy1SEzuxgGMYnI3DmAUk7txAKOY3E3PAPhmsZjdjAMYxuxmHMAwZjfTMgC+WDSm9+IAxjG9Fwcwjum9dAyA7xWP+a04gAnMb8UBTGB+Kw5gAvNbaRgAXysDGzpxADPY0IkDmMGGThzADDZ04gBmsKETBzCDDZ04gBls6KRfAHyrHOxoxAFMYUcjDmAKOxpxAFPY0YgDmMKORhzAFHY04gCmsKMRBzCFHY04gCnsaMQBTGFHIw5gCjsacQBT2NHIVgFwyjf4YQZP5mDHDJ68wQ972CQAjuYJbhrDMznYMYZnnuCm1dYHwHm8xe1vcXsOdrzF7W9x+0KLA+AcBvHQa9ybgx2vce8gHlplZQCcwBQefYU7M7DhFe6cwqNLLAuAdz+AAU9xWwY2PMVtBzCg3poAeOujmPIEN2VgwxPcdBRTii0IgPc9h1mPcEcGNjzCHecwq1J5ALzqaYx7gBsysOEBbjiNcXVqA+AtYzDzB37OwIYf+DkGM4sUBsD7BWLwN/yYgQ3f8GMgBleoCoA3i8b0e/wWj/n3+C0a09PVBMBLJWDBHX6Kx/w7/JSABclKAuCNcrDjBj/EY/4NfsjBjly/P4Cf58T1eMz/h+tJWJKrIgDeJw97/uJyNKb/xeU87EnVIoDvJ8XVaEz/wtVELErVI4BvR8XFaEwHFzOxKVWTAO7PimvRmP6Ja6lYlarB/wj8xKpPXIvF7E9cS8WqXG0CuDsuLsVi9hWXcrErV58Asj8Qk6+4lIxluRoFcHtgXInE5A9cyca2XJ0CuDkxLkRi8gUX0rEuV0kAHQpg7gUX0rEuWa8A/h0af8dh7op3SdUsgLTvxNQlr5KqWwB/j40/ozB1xZvkahtA7E5mOoCjeKcKbMwJgD8rsDFbvwAyPhYTl7xGMgcwgokO4DBeqgY745Yyb81bJCsKYMnZ8dd50fNGsDNd5wCiljLNAZzBaxWJXRo7bRBL07UOIGYrsxzAKbxWFbZGrGXSqjfIVhXAov/74c8zmLToBdI1DSDuszFn1b8/XfcAzu5ligM4jRcrw9qTi5mx8J+fzQG8xAwHEIA3K8PaU4uZ0Pj7KwRwfDPPX3ChDGsLKARwdDVPf+BKGdYWqAtgswL45QtXb/HLB66UYW0FjQDudnPpEe644tIVl8qwtoJIAF/L+euVR3dyrQxrK6gE8LGd//Teo4dLsbZCYQC/9xiZV4a1JRzAAOaVYW0JBzCAeWVYW8IBDGBeGdaWqAyg+iDZeh7zqrC1RucAok6SaWVYW8MBvMe0MqytURrAL/3vUqZVYWuRzgGw9DzmFWFpkdoAKo+SjTGYWYGNVdoGwMIoTC3AwirFAZQdJOviMDcd68o0DYBtkZicjW1lqgOoOUd2xWJ2LnbVaRkAq6IxPRWr6pQHUHCMLIrH/EQsKtQwAPZkYEMe9hSqDyD9FFmTgQ1pWFOpXwBsycGOLGyptCCA3FNkRxa25GBHqRUBZJ4iG/KwJwMbai0JIPEUWZCHPQlYUKxZAMzPxKZ4zC+2JoCsU2R6LnZFY3q1RQEknSLDc7ErGMPLrQog5RgZnY1toRhdb1kAGcfI5Gxsi8TkBdYFEH+OzM3HvjjMXWFhAOHnyNh87AvD2CVWBhB8kAytwMYgDF1jaQCxB8nMCmyMwcxF1gYQeZJMrMHOCExcZXEAgSfJwBrsDMDAZVYHEHeUzKvBzvOYt87yAKLOkmlV2HoW0xZaH0DQYTKrClvPYdZSOwQQcZpMqsPeM5i01hYBBBwnc+qw9zjmrLZJAKfPkzF12HsYY5bbJYCzJ8qQOuw9iCEb2CeAU2fKhEpsPoIJW9gpgBNnyoBKbD6AAXvYKoDjp8rjldg8jcd3sVkAF5zTHJ6txOY5PLuR/QI4dLQ8WYnNM3hyKzsGcMGJDeOxSmwexmO72TSAC85tDM9UYvMYntnQvgFccHrvcX8tdr/H/XvaOoArTvEJblqHf8cT3LSx/QP4xIHe4Ic98G+6wQ/b+y0BWBIHIM4BiHMA4hyAOAcg7rcEwP9zdYMf9sC/6QY/bG//ADjQJ7hpHf4dT3DTxrYOgFN8j/trsfs97t/TvgFwemN4phKbx/DMhjYNgHMbxmOV2DyMx3azYwCc2AyerMTmGTy5lf0C4LDm8GwlNs/h2Y1sFgDnNI3HK7F5Go/vYqsAOKIDGFCJzQcwYA87BcD5HMGESmw+gglb2CcADucghtRh70EM2cAuAXAwhzGmDnsPY8xymwTAqRzHnDrsPY45q20RAEdyBpPqsPcMJq21QwCcxznMqsLWc5i11PoAOIyzmFaFrWcxbaHlAXAS5zGvBjvPY946qwPgHAIwsAY7AzBwmcUBcAoRmFiDnRGYuMraADiDGMyswMYYzFxkaQCcQBCGVmBjEIausTIA3j8MY/OxLwxjl1gYAG8fh7n52BeHuSusC4B3j8TkbGyLxOQFlgXAm4didDa2hWJ0vVUB8N7BGJ6LXcEYXm5RALx1NKbnYlc0pldbEwDvHI/5mdgUj/nFmgWQf4rsScCCYksC4I0zsCEPezKwodaKAHjfHOzIwpYc7Ci1IADeNgtbcrAjC1sq9Qsg8xTZkIY1leoD4F3zsCcDG/Kwp1DDAPJOkfmJWFSoPADeNBWrojE9FavqtAwg5xiZnYtddaoD4D2zsS0Sk7OxrUzTAOLPkbnpWFemOADesgALozC1AAurtA0g9iCZWYGNVWoD4B2LsPQ85hVhaZHOAUQdJdOqsLVIaQC8YRnWnsW0Mqyt4QDeY1oZ1tboHABbz2NeFbbWqAyA9yvD2vOYV4a1JRzAAOaVYW0JBzCAeWVYW8IBDGBeGdaWKAyAtyvDWvy48MKjh0uxtoJKAI+uPfboTq6VYW0FkQC4dMWlR7jjiktXXCrD2goaAXDlFr984eotfvnAlTKsrVAXAO9WhrUfuDKLpz9wpQxrCygEwIV5PH/BhTKsLSAQAH8fwQQHEIA3K8Pak4uZ0bgAB/ASMxzAebxYFbae3suUdf/+bN0D4M/jmOMAzuLFirA0YiuTFr1AuqoAeK8qbP29AZQV0DMAlsZsZdaiV8jWOgD+Oit22iCWpmsZADuDA1jzDtk6B8Bf50XPG8HOdEUB8FY12BkeQMsCGgbAysidTFzyGskcwAgmOoDDeKkKbIxdycwV75GsJgDeqQIbkwLoV0DbAPgzClMdwDG8UgEWpgWw4lVSNQuAfQkbmbviXVL1CoB1F1yIw9wLLqRjXbKSAHijdKy74EIkJl9wIR3rcnUKgG0fuBKJyR+4ko1tuRoFwLIrLkVi8hWXkrEsV58A2HXFpVjMvuJSLnblahMAqz5xLRazP3EtFatyVQTA+6Ri1SeuRWP6J66lYlWqJgGwCVyMxnRwMRObUvUIgEVfuBqN6V+4mohFqVoEwJ6/uByN6X9xOQ97UjX4H4Es+Yfr8Zj/D9eTsCTX7w+AHTf4IR7zb/BDDnbkKgkg8ZxYcIef4jH/Dj8lYEGymgDSzonp9/gtHvPv8Vs0pqerCuCCNwvE4G/4MQMbvuHHQAyuUBjABe8Xg5k/8HMGNvzAzzGYWaQ2gAve8jTGPcANGdjwADecxrg65QEEnRWzHuGODGx4hDvOYValBQFc8L5HMeUJbsrAhie46SimFFsTwAVvfQADnuK2DGx4itsOYEC9ZQFc8O5TePQV7szAhle4cwqPLrEygAtOYBAPvca9OdjxGvcO4qFVFgdwwTm8xe1vcXsOdrzF7W9x+0LrA7jiPJ7gpjE8k4MdY3jmCW5abZMAPnE0N/hhBk/mYMcMnrzBD3vYKoAQnHIOdjTiAKawoxEHMIUdjTiAKexoxAFMYUcjDmAKOxpxAFPY0YgDmMKORhzAFHY04gCmsKMRBzCFHY04gCnsaKRfAJkFsKETBzCDDZ04gBls6MQBzGBDJw5gBhs6cQAz2NCJA5jBhk4aBpBXAPNbcQATmN+KA5jA/FYcwATmt9IxgKwCmN6LAxjH9F4cwDim99IygJwCmN2MAxjG7GYcwDBmN9MzgIwCmNyNAxjF5G4cwCgmd+MARjG5m6YBxBfA3HYcwCDmttM1gOgCmNpP2wBiC2BmQw5gCDMb6htAZAFM7KhxAHEFMK8lBzCAeS11DiCqAKb11DqAmAKY1ZQDeItZTfUOIKIAJnXVPIDzBTCnre4BnC2AKX21D+BcAcxozAG8xIzG+gdwpgAmdCYQwPECeL41hQCOFsDTvUkEcKwAnm1OI4AjBfBkdyIBzBfAc+2pBDBbAE/1JxPAXAE8I0AngJkCeEKBUADjBXC/BKUARgvgbg1SAYwVwL0itAIYKYA7VYgF8DYB7tIhF8DrArhHiF4ArwrgDiWCATwvgN+lKAbwrAB+1SIZwOMC+E2MZgCPCuAXNaIB/CyA63JUA/heAFf1yAZwlwBXFAkH8K8A/pakHMBXAfylSTqAzwL4z6K0AzAHoM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcg7c+f/wCx0c2+VmqfPgAAAABJRU5ErkJggg==",
DEFAULT_UP_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIlJREFUSEu9zlsOgCAQQ1EXxv63NQaTSYZ6QV7ycT6s0HKZ2bSUkmWaj8Cwh4+vPgLDLzru9FwPDFtoONLzXzCsoUGi91owJDTUovdrMFQ00EN7CIYRFY/QPoWho8IZ2hthmFHRCu13GFLBDrqTvQK6uJPuFR904Q9x8/i4Kx5AB054HkA/zkl2A3fzm51wX0ZlAAAAAElFTkSuQmCC",DEFAULT_DOWN_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIxJREFUSEvFzkEOgCAMRFEOxv2vVVOTGhi/gIJh8RZMaKcp52w7JTPbdoR3nwfsOCJ6rwMcffxD2Vkd4GhgJe2rHoEGV9AedwsCLZih+wOGgRZ9oXtLGJZo4Ru6T2GoaPEI3UMwJFTQovNPMHxCRUTnWjBsocKS/u/BsIeKnf4bgeGIFeUOw1Gz5WaWDtsHm52ye7DmAAAAAElFTkSuQmCC",
DEFAULT_LEFT_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIZJREFUSEut0EEKxEAIRNE5mPe/lqEWgjE/kLZm8VbtL0h+mbkWEfzwheL1QMWrgR4fD8z4aIBiweOJwoJBR1GHUaFgwlDomFixWLFYsVixWLFYsfgD9if85Sc6I7eBzchj4HQEB4SOCcaFggnDjqIOo4nCggGhWPD4jT0g9oDYA2IPSETkBTnKm53Tz5HlAAAAAElFTkSuQmCC",DEFAULT_RIGHT_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJVJREFUSEvFz0sOgCAQBFEOxv2vpbYJBEo+w8xCk9ro9EtMOefreZK3F4ggFfAiHeBBPsApMgQUD2dNAcXjUUtAccC2gOKozQQoDktmQHGsjgAVBlQYUGFAhQH1LxD6BY3dQBm7gHZ8DHCszACHJRPAUdsW4IAtAR6PmgI8nDUEeLTqA/BgVwfwo6UK8IO1F+BLe1e6AdOmm5054q0eAAAAAElFTkSuQmCC",
PARAM_THUMBS_POSITION:"thumbsPosition",PARAM_DEF_IMG_SRC:"defaultImageSrc",PARAM_DEF_THUMB_SRC:"defaultThumbSrc",PARAM_THUMBS:"thumbs",PARAM_BIG_IMG_SRC:"bigSrc",PARAM_THUMB_IMG_SRC:"thumbSrc",PARAM_HEIGHT:"h",PARAM_WIDTH:"w",PARAM_LEFT:"l",PARAM_TOP:"t",PARAM_THUMB_IMAGE_HEIGHT:"thumbImageHeight",PARAM_THUMB_IMAGE_WIDTH:"thumbImageWidth",PARAM_IMAGES_LIST:"images",PARAM_THUMB_TITLE:"title",PARAM_THUMBS_SCROLL_DELTA:"thumbsScrollDelta",CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor"},n=0;f.toast=
function(b,e,d){var u={};WAVE.intValidPositive(d)||(d=2500);var k=document.createElement("div");e=WAVE.strEmpty(e)?"":"_"+e;k.className=f.CLS_TOAST+e;k.style.zIndex=1E6;k.innerHTML=b;k.style.left=0;document.body.appendChild(k);b=Math.round(k.offsetWidth/2);k.style.left="50%";k.style.marginLeft=-b+"px";n++;1<n&&(k.style.marginLeft=-(b+4*n)+"px",k.style.marginTop=-(4*n)+"px");var m=!1;u.close=function(){if(m)return!1;document.body.removeChild(k);n--;return m=!0};u.closed=function(){return m};setTimeout(function(){u.close()},
d);return u};var r=[];f.curtainOn=function(){var b=document.createElement("div");b.style.backgroundColor="rgba(127,127,127,0.45)";b.className=f.CLS_CURTAIN;b.style.position="fixed";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";b.style.zIndex=5E5+r.length;document.body.appendChild(b);fCurtainDIV=b;r.push(b)};f.curtainOff=function(){if(0!==r.length){var b=r[r.length-1];"undefined"!==typeof b.__DIALOG?b.__DIALOG.cancel():(document.body.removeChild(b),WAVE.arrayDelete(r,
b))}};f.isCurtain=function(){return 0<r.length};f.currentDialog=function(){for(var b=r.length-1;0<=b;b--)if("undefined"!==typeof r[b].__DIALOG)return r[b].__DIALOG;return null};f.Dialog=function(b){function e(){var b=$(window).width(),c=$(window).height(),d=0==m?k.offsetWidth:Math.round(m/100*b),g=0==a?k.offsetHeight:Math.round(a/100*c);k.style.left=Math.round(b/2-d/2)+"px";k.style.top=Math.round(c/2-g/2)+"px";k.style.width=0==m?"auto":d+"px";k.style.height=0==a?"auto":g+"px";l.style.height=0==m?
"auto":g-(l.offsetTop+l.offsetLeft)+"px"}WAVE.isObject(b)||(b={});var d=WAVE.isFunction(b.onShow)?b.onShow:function(){},u=WAVE.isFunction(b.onClose)?b.onClose:function(){return!0};WAVE.extend(this,WAVE.EventManager);f.curtainOn();var k=document.createElement("div");k.__DIALOG=this;k.className=f.CLS_DIALOG_BASE+" "+WAVE.strDefault(b.cls);k.style.position="fixed";k.style.zIndex=5E5+r.length;var m=WAVE.intValidPositive(b.widthpct)?b.widthpct:0,a=WAVE.intValidPositive(b.heightpct)?b.heightpct:0;100<m&&
(m=100);100<a&&(a=100);document.body.appendChild(k);r.push(k);var c=document.createElement("div");c.className=f.CLS_DIALOG_TITLE;c.innerHTML=WAVE.strDefault(b.title,"Dialog");k.appendChild(c);var l=document.createElement("div");l.className=f.CLS_DIALOG_CONTENT;l.innerHTML=WAVE.strDefault(b.content,"&nbsp;");k.appendChild(l);var t=f.DLG_UNDEFINED;this.result=function(){return t};this.close=function(a){"undefined"===typeof a&&(a=f.DLG_CANCEL);if(t!==f.DLG_UNDEFINED)return t;if(!u(this,a))return f.DLG_UNDEFINED;
t=a;document.body.removeChild(k);WAVE.arrayDelete(r,k);f.curtainOff();this.eventInvoke(f.EVT_DIALOG_CLOSE,a);return a};this.ok=function(){this.close(f.DLG_OK)};this.cancel=function(){this.close(f.DLG_CANCEL)};this.title=function(a){if("undefined"===typeof a||null===a)return c.innerHTML;c.innerHTML=a;e()};this.content=function(a){if("undefined"===typeof a||null===a)return l.innerHTML;l.innerHTML=a;e()};this.widthpct=function(a){if("undefined"===typeof a||a===m)return m;m=a;e()};this.widthpct=function(b){if("undefined"===
typeof b||b===a)return a;a=b;e()};e();var h=null;$(window).resize(function(){h&&clearTimeout(h);h=setTimeout(function(){e();h=null},500)});d(this)};var h=!1;f.dirty=function(b){if("undefined"===typeof b)return h;h=b};f.isDirty=function(){return h||null!=f.currentDialog()};f.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(b){f.SUPPRESS_UNLOAD_CHECK||!f.isDirty()&&!WAVE.RecordModel.isDirty()||((b||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};
f.PuzzleKeypad=function(b){if("undefined"===typeof b||null===b||"undefined"===typeof b.DIV||WAVE.strEmpty(b.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var e=this;WAVE.extend(e,WAVE.EventManager);var d=WAVE.genRndKey(4),u=b.DIV,k=WAVE.strEmpty(b.Help)?"Please enter the following security information by touching the symbols below":b.Help,m=WAVE.strEmpty(b.Question)?"":b.Question,a=[],c=b.Image,l=null,t=null,h=null;this.value=function(){return a};this.jsonValue=function(){return JSON.stringify(a)};
this.help=function(a){if("undefined"===typeof a)return k;k=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;l.innerHTML=k};this.question=function(a){if("undefined"===typeof a)return m;m=WAVE.strEmpty(a)?"":a;t.innerHTML=m};(function(){var b="pzl_"+d+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),b={hid:"divHelp_"+b,qid:"divQuestion_"+b,tid:"tbValue_"+b,bid:"btnClear_"+b,iid:"img_"+b,help:k,question:m,img:c+"&req="+WAVE.genRndKey(),clear:"Clear"},
K=WAVE.strTemplate("<div class='wvPuzzleHelp'     id='@hid@'>@help@</div><div class='wvPuzzleQuestion' id='@qid@'>@question@</div><div class='wvPuzzleInputs'> <input id='@tid@' placeholder='\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7' type='text' disabled /><button id='@bid@'>@clear@</button> </div><div class='wvPuzzleImg'> <img id='@iid@' src='@img@'/></div>",b);u.innerHTML=K;$("#"+b.bid).click(function(b){b.preventDefault();h.value="";a=[];e.eventInvoke(f.EVT_PUZZLE_KEYPAD_CHANGE,
a)});$("#"+b.iid).click(function(b){var c=$(this).offset();a.push({x:Math.round(b.pageX-c.left),y:Math.round(b.pageY-c.top)});h.value+="*";e.eventInvoke(f.EVT_PUZZLE_KEYPAD_CHANGE,a)});l=WAVE.id(b.hid);t=WAVE.id(b.qid);h=WAVE.id(b.tid);WAVE.id(b.bid);WAVE.id(b.iid)})()};var A=function(b){function e(a){return p.wFirst(function(b){return b.element===a})}function d(a){return K.wFirst(function(b){return b.name===a})}function u(a,b){var c=d(a);null===c?(c={name:a,cfg:b||{},elementInfos:[]},q.push(c)):
b&&(c.cfg=b);return c}function k(a){var b=a.currentTarget,d=e(b);null!==d&&(a=d.ruler.onMouseMove(a),c(b,d.scopeInfos,a),b=WAVE.arrayWalkable(d.scopeInfos).wSelect(function(a){return a.name}).wToArray(),h.eventInvoke(f.EVT_RULER_MOUSE_MOVE,a,b))}function m(a){a=a.currentTarget;var b=e(a);null!==b&&(b.ruler.onMouseEnter(),l(a,b.scopeInfos),a=WAVE.arrayWalkable(b.scopeInfos).wSelect(function(a){return a.name}).wToArray(),h.eventInvoke(f.EVT_RULER_MOUSE_ENTER,a))}function a(a){var b=a.currentTarget,
c=e(b);null!==c&&(c.ruler.onMouseLeave(a),t(b,c.scopeInfos),a=WAVE.arrayWalkable(c.scopeInfos).wSelect(function(a){return a.name}).wToArray(),h.eventInvoke(f.EVT_RULER_MOUSE_LEAVE,a))}function c(a,b,c){c={scope:null,masterRes:c};for(var d in b){var e=b[d];c.scope=e;for(var g in e.elementInfos){var k=e.elementInfos[g];if(a!==k.element)k.ruler.onScopeMouseMove(c)}}}function l(a,b){for(var c in b){var d=b[c],e;for(e in d.elementInfos){var g=d.elementInfos[e];if(a!==g.element)g.ruler.onScopeMouseEnter(d)}}}
function t(a,b){for(var c in b){var d=b[c],e;for(e in d.elementInfos){var g=d.elementInfos[e];if(a!==g.element)g.ruler.onScopeMouseLeave(d)}}}var h=this;WAVE.extend(this,WAVE.EventManager);var q=[],K=WAVE.arrayWalkable(q),n=[],p=WAVE.arrayWalkable(n);this.set=function(b){var c=b.element,d=b.elementCfg;b=u(b.scopeName||"",b.scopeCfg);var l=e(c);if(null===l){var l={element:c,cfg:d||{},scopeInfos:[]},f=$(c);f.bind("mouseenter",m);f.bind("mouseleave",a);f.bind("mousemove",k);c=new C(c,d);l.ruler=c;n.push(l)}else d&&
(l.cfg=d,l.ruler.cfg(d));c=l;-1===b.elementInfos.indexOf(c)&&b.elementInfos.push(c);-1===c.scopeInfos.indexOf(b)&&c.scopeInfos.push(b)};this.unset=function(b){var c=b.element,l=b.scopeName,f=e(b.element);null!==f&&(l?(b=d(l),null!==b&&WAVE.arrayDelete(b.elements,f),WAVE.arrayDelete(f.scopes,b)):(WAVE.arrayWalkable(f.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,f)}),f.scopeInfos.splice(0,f.scopeInfos.length)),0===f.scopeInfos.length&&(c=$(c),c.unbind("mouseenter",m),c.unbind("mouseleave",
a),c.unbind("mousemove",k),WAVE.arrayDelete(n,f)))};this.setScope=function(a,b){u(a,b)};this.mouseMove=function(a,b){var d=K.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();c(null,d,a)};this.mouseEnter=function(a){var b=K.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();l(null,b)};this.mouseLeave=function(a){var b=K.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();t(null,b)}},C=function(b,e){function d(a,b,c){a=new WAVE.arrayWalkable([v,r,z,y,I,null,G,B,D,F,null,
H]);c?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}function f(){n||(v=document.createElement("div"),v.id="WAVE_GUI_Ruler",v.innerHTML="Hint DIV",v.className=h,v.style.position="absolute",document.body.appendChild(v),y=a(!0),r=a(!0),D=a(!1),G=a(!1),z=a(!1),I=a(!1),B=a(!0),F=a(!0),n=!0)}function k(){n&&(c(v),v=null,c(y),y=null,c(r),r=null,c(D),D=null,c(G),G=null,
c(z),z=null,c(I),I=null,c(B),B=null,c(F),F=null,n=!1)}function m(){p&&(c(H),H=null,p=!1)}function a(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position="absolute";b.className=q;document.body.appendChild(b);return b}function c(a){null!==a&&document.body.removeChild(a)}var l=this,t=e||{};this.cfg=function(a){"undefined"!==typeof a&&a!==e&&(t=a);return t};var h=t.hintCls||"wvRulerHint",q=t.sightCls||"wvRulerSight",K=t.sightSize||8,n=!1,p=!1,v=null,r=null,
z=null,y=null,I=null,G=null,B=null,D=null,F=null,H=null;this.onMouseEnter=function(a){f()};this.onMouseLeave=function(a){k()};this.onMouseMove=function(a){m();f();var c;if(t.parentRc)c=t.parentRc;else{var e=b.getBoundingClientRect();c=WAVE.Geometry.toRectWH(e.left,e.top,e.width,e.height)}var e=a.clientX-c.left(),g=a.clientY-c.top();v.style.left=a.clientX+"px";v.style.top=a.clientY+"px";var l=null,l=t.getTxt?t.getTxt({clientPoint:new WAVE.Geometry.Point(a.clientX,a.clientY),divHint:v}):e+", "+g;v.innerHTML=
l;for(var l=v.getBoundingClientRect(),l=WAVE.Geometry.toRectWH(l.left,l.top,l.width,l.height),k=a.clientX,q=a.clientY,h=c,p=null,n=l.square(),V=Number.MAX_VALUE,T=0;T<2*Math.PI;T+=Math.PI/4){var R=WAVE.Geometry.rotateRectAroundCircle(k,q,20,l.width(),l.height(),T),O=WAVE.Geometry.overlapAreaRect(h,R),O=n-O;if(0==O){p=R;break}O<V&&(V=O,p=R)}l=p.topLeft();v.style.left=l.x()+"px";v.style.top=l.y()+"px";l=a.clientX;k=a.clientY;q=l-K;q<c.left()&&(q=c.left());h=l+K;h>c.right()&&(h=c.right());p=k-K;p<c.top()&&
(p=c.top());n=k+K;n>c.bottom()&&(n=c.bottom());r.style.left=c.left()+"px";r.style.width=q-c.left()+"px";r.style.top=k+"px";y.style.left=h+"px";y.style.width=c.right()-h+"px";y.style.top=k+"px";z.style.top=c.top()+"px";z.style.height=p-c.top()+"px";z.style.left=l+"px";I.style.top=n+"px";I.style.height=c.bottom()-n+"px";I.style.left=l+"px";G.style.top=p+"px";G.style.height=n-p+"px";G.style.left=q+"px";D.style.top=p+"px";D.style.height=n-p+"px";D.style.left=h+"px";B.style.left=q+"px";B.style.width=h-
q+"px";B.style.top=p+"px";F.style.left=q+"px";F.style.width=h-q+"px";F.style.top=n+"px";e=t.getMasterInfo?t.getMasterInfo({clientPoint:new WAVE.Geometry.Point(a.clientX,a.clientY)}):{elementRcPoint:new WAVE.Geometry.Point(e,g),isInParentRc:!0};d(a.clientX,a.clientY,e.isInParentRc);return e};this.onScopeMouseEnter=function(b){p||(H=a(!1),p=!0)};this.onScopeMouseLeave=function(a){m()};this.onScopeMouseMove=function(b){k();p||(H=a(!1),p=!0);var c=l.getParentRc(),e,g,m;t.getSlaveInfo?(g=t.getSlaveInfo({masterRes:b.masterRes}),
m=g.isInParentRc,e=g.clientPoint.x(),g=g.clientPoint.y()):(g=b.masterRes.elementRcPoint,m=!0,e=c.left()+g.x(),g=c.top()+g.y());d(e,g,b.masterRes.isInParentRc&&m);H.style.top=c.top()+"px";H.style.height=c.height()+"px";H.style.left=e+"px"};this.getParentRc=function(){var a;t.parentRc?a=t.parentRc:(a=b.getBoundingClientRect(),a=WAVE.Geometry.toRectWH(a.left,a.top,a.width,a.height));return a}},x=null;f.rulerSet=function(b){null===x&&(x=new A);x.set(b)};f.rulerUnset=function(b){null!==x&&x.unset(b)};
f.rulerSetScope=function(b,e){null===x&&(x=new A);x.setScope(b,e)};f.rulerMouseMove=function(b,e){null!==x&&x.mouseMove(b,e)};f.rulerMouseEnter=function(b){null!==x&&x.mouseEnter(b)};f.rulerMouseLeave=function(b){null!==x&&x.mouseLeave(b)};f.rulerEventBind=function(b,e){null===x&&(x=new A);x.eventBind(b,e)};f.WindowConnector=function(b){b=b||{};var e=this;b=b.wnd||window;var d=[],f=WAVE.arrayWalkable(d);this.connectedWindows=function(){return WAVE.arrayShallowCopy(d)};this.openWindow=function(a){var b=
window.open(a||window.location.href);f.wEach(function(a){a.Connector.addWindow(b)});e.addWindow(b)};this.closeCurrentWindow=function(){f.wEach(function(a){a.Connector.removeWindow(win)})};this.addWindow=function(a){d.push(a.window)};this.removeWindow=function(a){WAVE.arrayDelete(d,a)};this.callWindowFunc=function(a){var b;f.wEach(function(d){d.closed?(b||(b=[]),b.push(d)):a(d)});if(b){var d=WAVE.arrayWalkable(b);d.wEach(function(a){e.removeWindow(a)});d.wEach(function(a){f.wEach(function(b){b.Connector.removeWindow(a)})})}};
this.logMsg=function(a){console.log(a)};if(b.opener&&b.opener.Connector){e.addWindow(b.opener);var k=b.opener.Connector.connectedWindows(),m;for(m in k){var a=k[m];a!==b&&(a.closed||e.addWindow({window:a}))}}};f.connectorEnsure=function(b){b=b||window;b.Connector||(b.Connector=new f.WindowConnector({wnd:b}))};var t=0;f.Tree=function(b){function e(a,b){if(l===f.TREE_SELECTION_SINGLE){!0===b&&n.getDescendants().wEach(function(b){if(b.node!==a&&!0===b.node.selected()){var c={phase:f.EVT_PHASE_BEFORE,
node:b.node,value:b.node.selected()};d(f.EVT_TREE_NODE_SELECTION,c);b.node.selected(!1,!0);b={phase:f.EVT_PHASE_AFTER,node:b.node,value:b.node.selected()};d(f.EVT_TREE_NODE_SELECTION,b)}});var c={phase:f.EVT_PHASE_AFTER,node:a,value:b};d(f.EVT_TREE_NODE_SELECTION,c)}else l===f.TREE_SELECTION_MULTI&&(c={phase:f.EVT_PHASE_AFTER,node:a,value:b},d(f.EVT_TREE_NODE_SELECTION,c))}function d(a,b){h||k.eventInvoke(a,b)}var u=function(b){b=b||{};var h=this;t++;var w="tvn_"+t,p=b.parent||null;if(null!==p&&p.tree()!==
k)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return p};var v,r,z,y,I;this.__divChildren=function(){return null!==p?I:m};var G="undefined"!==typeof b.id?b.id.toString():t.toString();this.id=function(){return G};var B="undefined"===typeof b.expandedContent?k.DEFAULT_NODE_EXPANDED_CONTENT:b.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return B;B=a;r&&(r.innerHTML=L?B:D)};var D="undefined"===typeof b.collapsedContent?k.DEFAULT_NODE_COLLAPSED_CONTENT:
b.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return D;D=a;r&&(r.innerHTML=L?B:D)};this.path=function(){return null===p?"":p===n?G:p.path()+"/"+G};this.level=function(){return null===p?-1:p===n?0:p.level()+1};this.html=function(a){if(null===p)return null;if("undefined"===typeof a)return y.innerHTML;var b={phase:f.EVT_PHASE_BEFORE,node:h,oldContent:y.innerHTML,newContent:a,abort:!1};d(f.EVT_TREE_NODE_CONTENT,b);!0!==b.abort&&(y.innerHTML=a,d(f.EVT_TREE_NODE_CONTENT,
{phase:f.EVT_PHASE_AFTER,node:h,oldContent:y.innerHTML,newContent:a}))};var F=!1!==b.selectable;this.selectable=function(a){if("undefined"===typeof a)return F;F=a;H&&!a&&h.selected(!1)};var H=!0===b.selected;this.selected=function(a,b){if(l===f.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return H;if(a!==H&&(F||!F&&!a)){if(!0!==b){var c={phase:f.EVT_PHASE_BEFORE,node:h,value:a,abort:!1};d(f.EVT_TREE_NODE_SELECTION,c);if(!0===c.abort)return}H=a;y.className=H?h.wvTreeNodeOwnSelected():h.wvTreeNodeOwn();
!0!==b&&e(h,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return v.className;v.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return r.className;r.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return z.className;z.className=a};var J=b.wvTreeNodeButtonExpanded||a.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(b){if("undefined"===typeof b)return J||a.wvTreeNodeButtonExpanded;b!==J&&(J=b,r.className=L?h.wvTreeNodeButtonExpanded():
h.wvTreeNodeButtonCollapsed())};var x=b.wvTreeNodeButtonCollapsed||a.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(b){if("undefined"===typeof b)return x||a.wvTreeNodeButtonCollapsed;b!==x&&(x=b,r.className=L?h.wvTreeNodeButtonExpanded():h.wvTreeNodeButtonCollapsed())};var A=b.wvTreeNodeOwn||a.wvTreeNodeOwn;this.wvTreeNodeOwn=function(b){if("undefined"===typeof b)return A||a.wvTreeNodeOwn;b!==A&&(A=b,y.className=H?h.wvTreeNodeOwnSelected():h.wvTreeNodeOwn())};var C=b.wvTreeNodeOwnSelected||
a.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(b){if("undefined"===typeof b)return C||a.wvTreeNodeOwnSelected;b!==C&&(C=b,y.className=H?h.wvTreeNodeOwnSelected():h.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return I.className;I.className=a};var N=b.childrenDisplayVisible||c;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return N;a!==N&&(N=a,L&&(I.style.display=N))};var M=b.data;this.data=function(a){if("undefined"===typeof a)return M;
if(M!==a){var b={phase:f.EVT_PHASE_BEFORE,node:h,oldData:M,newData:a,abort:!1};d(f.EVT_TREE_NODE_DATA,b);!0!==b.abort&&(M=a,d(f.EVT_TREE_NODE_DATA,{phase:f.EVT_PHASE_AFTER,node:h,oldData:M,newData:a}))}};var L=!0===b.expanded;this.expanded=function(a){if("undefined"===typeof a)return L;if(null!==p&&L!==a){var b={phase:f.EVT_PHASE_BEFORE,node:h,value:a,abort:!1};d(f.EVT_TREE_NODE_EXPANSION,b);!0!==b.abort&&(L=a,r.className=L?h.wvTreeNodeButtonExpanded():h.wvTreeNodeButtonCollapsed(),r.innerHTML=a?
B:D,I.style.display=a?N:"none",d(f.EVT_TREE_NODE_EXPANSION,{phase:f.EVT_PHASE_AFTER,node:h,value:a}))}};var E=[];this.children=function(){return WAVE.arrayShallowCopy(E)};this.__children=function(){return E};this.tree=function(){return k};this.getDescendants=function(){return h.__getDescendants(0)};this.__getDescendants=function(a){var b=function(){var b=WAVE.arrayWalkable(E).getWalker(),c=null,d=0,e=-1;this.reset=function(){b=WAVE.arrayWalkable(E).getWalker();d=0;e=-1};this.moveNext=function(){function g(){if(b.moveNext())return e++,
d=1,!0;d=0;return!1}if(0===d)return g();if(1===d)if(c=b.current().__getDescendants(a+1).getWalker(),c.moveNext())d=2;else return g();else if(2===d&&!c.moveNext())return g();return!0};this.current=function(){if(1===d)return{level:a,nodeNum:e,node:b.current()};if(2===d)return c.current()}},c={getWalker:function(){return new b},tree:k};WAVE.extend(c,WAVE.Walkable);return c};this.getChildIdx=function(a,b){return b?h.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),a)}):WAVE.arrayWalkable(E).wFirstIdx(function(b){return WAVE.strSame(b.id(),
a)})};this.getChild=function(a,b){if(b){var c=h.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),a)});return c?c.node:null}return WAVE.arrayWalkable(E).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var b=null,c=WAVE.arrayWalkable(E),d;for(d in a){var e=a[d],b=c.wFirst(function(a){return a.id()==e});if(null===b)return null;c=WAVE.arrayWalkable(b.__children())}return b};
this.unveil=function(){var a=p;if(null!==a)for(;null!==a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(a){"undefined"===typeof a&&(a={});var b={phase:f.EVT_PHASE_BEFORE,parentNode:h,childNodeInit:a,abort:!1};d(f.EVT_TREE_NODE_ADD,b);if(!0!==b.abort)return a.parent=h,a=new u(a),E.push(a),null!==p&&(r.style.visibility="visible"),d(f.EVT_TREE_NODE_ADD,{phase:f.EVT_PHASE_AFTER,parentNode:h,childNode:a}),a};this.__removeChild=function(a){WAVE.arrayDelete(E,a);0===E.length&&null!==
p&&(r.style.visibility="hidden")};this.remove=function(){if(null===p)console.error("Root node couldn't be removed");else{var a={phase:f.EVT_PHASE_BEFORE,parentNode:p,childNode:h,abort:!1};d(f.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(v.parentNode.removeChild(v),p.__removeChild(h),d(f.EVT_TREE_NODE_REMOVE,{phase:f.EVT_PHASE_AFTER,parentNode:p,childNode:h}))}};this.removeAllChildren=function(){var a=WAVE.arrayShallowCopy(E),b;for(b in a)a[b].remove()};if(null!==p){var Q={id:w,wvTreeNode:b.wvTreeNode||
a.wvTreeNode,wvTreeNodeContent:b.wvTreeNodeContent||a.wvTreeNodeContent,wvTreeNodeOwn:b.wvTreeNodeOwn||a.wvTreeNodeOwn,wvTreeNodeOwnSelected:b.wvTreeNodeOwnSelected||a.wvTreeNodeOwnSelected,wvTreeNodeChildren:b.wvTreeNodeChildren||a.wvTreeNodeChildren};Q.wvTreeNodeButton=L?h.wvTreeNodeButtonExpanded():h.wvTreeNodeButtonCollapsed();var X=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
Q),Y=p.__divChildren();v=document.createElement("div");v.id="root_"+w;v.className=Q.wvTreeNode;v.innerHTML=X;Y.appendChild(v);z=WAVE.id("content_"+w);y=WAVE.id("own_"+w);I=WAVE.id("children_"+w);y.innerHTML=b.html;y.className=H?h.wvTreeNodeOwnSelected():h.wvTreeNodeOwn();$(y).click(function(){h.selected(!H)});b=1==b.expanded;r=WAVE.id("exp_"+w);r.innerHTML=L?B:D;r.style.visibility="hidden";$(r).click(function(){h.expanded(!L)});I.style.display=b?N:"none"}};if("undefined"===typeof b||null===b||"undefined"===
typeof b.DIV||null===b.DIV)throw"Tree.ctor(init.DIV)";var k=this;WAVE.extend(k,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var m=b.DIV,a={wvTreeNode:b.wvTreeNode||f.CLS_TREE_NODE,wvTreeNodeButtonExpanded:b.wvTreeNodeButtonExpanded||f.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:b.wvTreeNodeButtonCollapsed||f.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:b.wvTreeNodeContent||f.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:b.wvTreeNodeOwn||f.CLS_TREE_NODE_OWN,
wvTreeNodeOwnSelected:b.wvTreeNodeOwnSelected||f.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:b.wvTreeNodeChildren||f.CLS_TREE_NODE_CHILDREN},c=b.childrenDisplayVisible||"block",l=b.treeSelectionType||f.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof l)return l;l=a};this.selectedNodes=function(a){if("undefined"===typeof a)return n.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";n.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b==a.node.id()}),!0)})};var h=!0===b.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return h;h=a};var n=new u;this.root=function(){return n}};var e=0;f.ObjectInspector=function(b,g){function d(g,a,c){var l=Object.keys(a),f;for(f in l){var t=l[f],u=a[t];if(null!==u&&"object"!==typeof u){var h="objinsp_edit_"+e++,n=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',
{id:h,key:t,val:u,objpath:c?c+"/"+t:t,cls:k}),n=g.addChild({html:n}),h=WAVE.id(h);h.objpath=n.path();h.addEventListener("input",function(a){for(var c=a.target.getAttribute("objpath").split(/\//),d=b,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=a.target.value})}else n=g.addChild({html:t}),d(n,u,c?c+"/"+t:t)}}WAVE.extend(this,WAVE.EventManager);var t=new f.Tree({DIV:g.div});g=g||{};var k=g.wvObjectInspectorEditor||f.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(b){if("undefined"===
typeof b)return k;k=b};this.wvTreeNodeButtonExpanded=function(b){if("undefined"===typeof b)return fWVTreeNodeButtonExpanded||fNodeTemplateClsArgs.wvTreeNodeButtonExpanded;b!==fWVTreeNodeButtonExpanded&&(fWVTreeNodeButtonExpanded=b,fExpander.className=fExpanded?node.wvTreeNodeButtonExpanded():node.wvTreeNodeButtonCollapsed())};d(t.root(),b,"")};f.IBox=function(b,e){function d(a){return{x:isNaN(a.pageX)?a.originalEvent.touches[0].pageX:a.pageX,y:isNaN(a.pageY)?a.originalEvent.touches[0].pageY:a.pageY}}
function t(){return F===f.POS_LEFT||F===f.POS_RIGHT}function k(a){var b=A[a.src];if(!b){var c=a.naturalHeight,b=a.naturalWidth;if(0==c||0==b)c=new Image,c.src=a.src,b=c.width,c=c.height;b={width:b,height:c};A[a.src]=b}return b}function m(a){a=WAVE.id(a);var b=k(a),c=b.width,d=b.height,b=a.parentElement.clientWidth,e=a.parentElement.clientHeight;1<b*d/(c*e)?(c=e*c/d,a.style.width=c+"px",a.style.height=e+"px",a.style.left=(b-c)/2+"px",a.style.top="0"):(c=b*d/c,a.style.width=b+"px",a.style.height=c+
"px",a.style.left="0",a.style.top=(e-c)/2+"px")}function a(a){var b=WAVE.id(a.id),c=WAVE.id(a.cropId),d=WAVE.id(a.imageId);t()?b.style.height=b.clientWidth+"px":b.style.width=b.clientHeight+"px";var e=k(d),g=e.width,e=e.height,e=typeof a.imageHeight==WAVE.UNDEFINED||isNaN(a.imageHeight)?e:a.imageHeight,g=typeof a.imageWidth==WAVE.UNDEFINED||isNaN(a.imageWidth)?g:a.imageWidth,l=typeof a.imageLeft==WAVE.UNDEFINED||isNaN(a.imageLeft)?0:a.imageLeft;a=typeof a.imageTop==WAVE.UNDEFINED||isNaN(a.imageTop)?
0:a.imageTop;var m=Math.min(b.clientHeight/e,b.clientWidth/g);c.style.height=e*m+"px";c.style.width=g*m+"px";c.style.top=(b.clientHeight-e*m)/2+"px";c.style.left=(b.clientWidth-g*m)/2+"px";d.style.height=d.naturalHeight*m+"px";d.style.width=d.naturalWidth*m+"px";d.style.left=l*m+"px";d.style.top=a*m+"px"}function c(a){var b=WAVE.id(y.imgMainImageId);if(a!==b.src){var c=new Image;c.onload=function(){var c=this.src;$(b).fadeOut(f.DEFAULT_IMAGE_FADEOUT_TIME,function(){b.src=c;m(y.imgMainImageId)}).fadeIn(f.DEFAULT_IMAGE_FADEIN_TIME,
function(){x.eventInvoke(f.EVT_IMAGE_CHANGED,a)})};c.onerror=function(){b.src=f.DEFAULT_IMAGE;m(y.imgMainImageId)};c.src=a}}function l(){var a=WAVE.id(y.divThumbsImagesContainerId);if(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth){if(!(1>J.length)){a=WAVE.id(J[0].id);a.style.marginTop="";a.style.marginLeft="";var a=WAVE.id(y.divThumbsImagesContainerId),b=WAVE.id(y.divNavBackId),c=WAVE.id(y.divNavForthId);t()?(a.style.height="90%",b.style.height="5%",b.style.width="100%",b.style.display=
"",c.style.height="5%",c.style.width="100%",c.style.display=""):(a.style.width="90%",b.style.height="100%",b.style.width="5%",b.style.display="inline-block",c.style.height="100%",c.style.width="5%",c.style.display="inline-block")}m(y.imgNavBackId);m(y.imgNavForthId)}else if(WAVE.id(y.divNavBackId).style.display="none",WAVE.id(y.divNavForthId).style.display="none",!(1>J.length)){for(var a=WAVE.id(J[0].id),b=WAVE.id(y.divThumbsImagesContainerId).parentElement,d=c=0,e=0;e<J.length;e++)var g=WAVE.id(J[e].id),
c=c+g.clientWidth,d=d+g.clientHeight;t()?a.style.marginTop=(b.clientHeight-d)/2+"px":a.style.marginLeft=(b.clientWidth-c)/2+"px"}}function h(){var a=WAVE.id(y.divNavBackId),b=WAVE.id(y.divNavForthId),c=D.canScrollBack()?1:f.DEFAULT_ARROWS_OPACITY,d=D.canScrollForth()?1:f.DEFAULT_ARROWS_OPACITY;a.style.opacity=c;b.style.opacity=d}function n(){m(y.imgMainImageId);for(var b=0;b<J.length;b++)a(J[b]);l()}function q(b,c){b.imageLoaded=!0;WAVE.id(b.imageId).src=c;a(b);var d;a:{for(d=0;d<J.length;d++)if(!J[d].imageLoaded){d=
!1;break a}d=!0}d?n():l()}function K(a){var b=WAVE.id(a.imageId);if(a.thumbImageSrc!==b.src){var c=new Image;c.onload=function(){var c=this.src;$(b).fadeOut(f.DEFAULT_IMAGE_FADEOUT_TIME,function(){q(a,c)}).fadeIn(f.DEFAULT_IMAGE_FADEIN_TIME)};c.onerror=function(){q(a,f.DEFAULT_IMAGE)};c.src=a.thumbImageSrc}}function r(a){return function(){c(a)}}function p(a){var b,c,e=WAVE.id(y.imgMainImageId),g=WAVE.id(y.divMainImageId);c=k(e);b=c.width;c=c.height;var l=g.clientWidth,m=g.clientHeight;if(b<=l&&c<=
m)return!1;var f=d(a);a=f.x-g.offsetLeft;g=f.y-g.offsetTop;1<b*m/(c*l)?(f=l*c/b,g=Math.min(Math.max(g,(m-f)/2),(m+f)/2),a=b*a/l,g=(g-(m-f)/2)*b/l):(f=m*b/c,a=Math.min(Math.max(a,(l-f)/2),(l+f)/2),a=(a-(l-f)/2)*c/m,g=c*g/m);b=b>l?Math.min(Math.max(a-l/2,0),b-l):(b-l)/2;c=c>m?Math.min(Math.max(g-m/2,0),c-m):(c-m)/2;e.style.width="";e.style.height="";e.style.left=-b+"px";e.style.top=-c+"px";return!0}function v(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble&&(a.cancelBubble=!0);a.preventDefault&&
a.preventDefault();return a.returnValue=!1}WAVE.isStringType(typeof b)&&(b=WAVE.id(b));WAVE.isObject(e)||(e={});var x=this;WAVE.extend(x,WAVE.EventManager);var z="ibox_"+WAVE.genRndKey(4),y={divFrameId:"divFrame_"+z,divThumbsContainerId:"divThumbsContainer_"+z,divNavBackId:"divNavBack_"+z,imgNavBackId:"imgNavBack_"+z,divThumbsImagesContainerId:"divThumbsImagesContainer_"+z,divNavForthId:"divNavForth_"+z,imgNavForthId:"imgNavForth_"+z,divMainImageId:"divMainImage_"+z,imgMainImageId:"imgMainImage_"+
z},I=!1,G=!1,B=null,D,F,H,J,A={};this.visible=function(a){var b=WAVE.id(y.divFrameId).style.visibility;""===b&&(b="visible");if(typeof a===WAVE.UNDEFINED||a===("visible"===b))return a;WAVE.id(y.divFrameId).style.visibility=a?"visible":"hidden";x.eventInvoke(f.EVT_INTERACTION_CHANGE,"visible",a);return a};var C=e[f.PARAM_IMAGES_LIST],z=e[f.PARAM_DEF_IMG_SRC],S=typeof z==WAVE.UNDEFINED?f.DEFAULT_IMAGE:WAVE.strDefault(C[z],f.DEFAULT_IMAGE),z=e[f.PARAM_DEF_THUMB_SRC],N=typeof z==WAVE.UNDEFINED?f.DEFAULT_IMAGE:
WAVE.strDefault(C[z],f.DEFAULT_IMAGE);J=e[f.PARAM_THUMBS];H=WAVE.strDefault(e[f.PARAM_THUMBS_SCROLL_DELTA],f.DEFAULT_THUMBS_SCROLL_DELTA);F=WAVE.strDefault(e[f.PARAM_THUMBS_POSITION],f.DEFAULT_THUMBS_POSITION);var M=document.createElement("img");M.id=y.imgMainImageId;M.className=f.IBOX_IMG_MAINIMAGE;M.src=f.DEFAULT_IMAGE;M.style.cssText=f.STYLE_IMG_MAINIMAGE+f.STYLE_DISABLE_MOBILE_HANDLING;M.ondragstart=function(){return!1};z=document.createElement("div");z.id=y.divThumbsImagesContainerId;z.className=
f.IBOX_DIV_THUMBSIMAGESCONTAINER;if(typeof J!=WAVE.UNDEFINED)for(var L=0;L<J.length;++L){var E=J[L],Q="divThumbId_ibox_"+L+"_"+WAVE.genRndKey(4),X="divThumbCropId_ibox_"+L+"_"+WAVE.genRndKey(4),Y="imgThumbImageId_ibox_"+L+"_"+WAVE.genRndKey(4),T=WAVE.strDefault(E[f.PARAM_THUMB_TITLE],""),R=E[f.PARAM_BIG_IMG_SRC],R=typeof R==WAVE.UNDEFINED?f.DEFAULT_IMAGE:WAVE.strDefault(C[R],S),U=E[f.PARAM_THUMB_IMG_SRC],U=typeof U==WAVE.UNDEFINED?f.DEFAULT_IMAGE:WAVE.strDefault(C[U],N);U!==f.DEFAULT_IMAGE&&U!==N&&
(E.imageHeight=parseFloat(E[f.PARAM_HEIGHT]),E.imageWidth=parseFloat(E[f.PARAM_WIDTH]),E.imageLeft=parseFloat(E[f.PARAM_LEFT]),E.imageTop=parseFloat(E[f.PARAM_TOP]));E.imageLoaded=!1;E.bigImageSrc=R;E.thumbImageSrc=U;E.id=Q;E.cropId=X;E.imageId=Y;E.title=T;E=t()?f.STYLE_DIV_THUMB_V:f.STYLE_DIV_THUMB_H;z.innerHTML+=WAVE.strHTMLTemplate("<div id='@divThumbId@' class='@divThumbClass@' style='@divThumbStyle@'><div id='@divThumbCropId@' class='@divThumbCropClass@' style='@divThumbCropStyle@'><img id='@divThumbImageId@' class='@divThumbImageClass@' style='@divThumbImageStyle@' src='@initialSrc@' ondragstart='return false;'></div></div>",
{divThumbId:Q,divThumbClass:f.IBOX_DIV_THUMB,divThumbStyle:E,divThumbCropId:X,divThumbCropClass:f.IBOX_DIV_THUMB_CROP,divThumbCropStyle:f.STYLE_DIV_THUMB_CROP,divThumbImageId:Y,initialSrc:f.DEFAULT_IMAGE,divThumbImageClass:f.IBOX_DIV_THUMB_IMAGE,divThumbImageStyle:f.STYLE_DIV_THUMB_IMAGE+f.STYLE_DISABLE_MOBILE_HANDLING})}t()?(z.style.cssText=f.STYLE_DIV_THUMBSIMAGESCONTAINER_V,S=f.STYLE_DIV_THUMBSCONTAINER_V,L=f.STYLE_DIV_THUMBSNAV_V,N=f.STYLE_DIV_MAINIMAGE_V,E=f.DEFAULT_UP_NAVIGATION_IMAGE,Q=f.DEFAULT_DOWN_NAVIGATION_IMAGE,
C=F===f.POS_LEFT?"right":"left"):(z.style.cssText=f.STYLE_DIV_THUMBSIMAGESCONTAINER_H,S=f.STYLE_DIV_THUMBSCONTAINER_H,L=f.STYLE_DIV_THUMBSNAV_H,N=f.STYLE_DIV_MAINIMAGE_H,E=f.DEFAULT_LEFT_NAVIGATION_IMAGE,Q=f.DEFAULT_RIGHT_NAVIGATION_IMAGE,C="");M="<div id='@divMainImageId@' class='@divMainImageClass@' style='@divMainImageStyle@ float: @imageFloat@'>"+M.outerHTML+"</div>";z="<div id='@divThumbsContainerId@' class='@divThumbsContainerClass@' style='@divThumbsContainerStyle@'><div id='@divNavBackId@' class='@divNavBackClass@' style='@divNavStyle@ opacity: @defaultOpacity@'><img id='@imgNavBackId@' style='@imgNavBackStyle@' src='@imgNavBackSrc@'></div>"+
z.outerHTML+"<div id='@divNavForthId@' class='@divNavForthClass@' style='@divNavStyle@'><img id='@imgNavForthId@' style='@imgNavForthStyle@' src='@imgNavForthSrc@'></div></div>";z=t()||F===f.POS_BOTTOM?"<div id='@divFrameId@' class='@divFrameClass@' style='@divFrameStyle@'>"+M+z+"</div>":"<div id='@divFrameId@' class='@divFrameClass@' style='@divFrameStyle@'>"+z+M+"</div>";b.innerHTML=WAVE.strHTMLTemplate(z,{divFrameId:y.divFrameId,divFrameClass:f.IBOX_DIV_FRAME,divFrameStyle:f.STYLE_DIV_FRAME,divMainImageId:y.divMainImageId,
divMainImageClass:f.IBOX_DIV_MAINIMAGE,divMainImageStyle:N,imageFloat:C,divThumbsContainerId:y.divThumbsContainerId,divThumbsContainerClass:f.IBOX_DIV_THUMBSCONTAINER,divThumbsContainerStyle:S,divNavBackId:y.divNavBackId,defaultOpacity:f.DEFAULT_ARROWS_OPACITY,divNavBackClass:f.IBOX_DIV_THUMBSNAVIGATION,imgNavBackId:y.imgNavBackId,imgNavBackStyle:f.STYLE_IMG_THUMBSNAV,imgNavBackSrc:E,divNavStyle:L,divNavForthId:y.divNavForthId,divNavForthClass:f.IBOX_DIV_THUMBSNAVIGATION,imgNavForthId:y.imgNavForthId,
imgNavForthStyle:f.STYLE_IMG_THUMBSNAV,imgNavForthSrc:Q});(function(){var a=WAVE.id(y.divThumbsImagesContainerId),b,c,d,e;t()?(b=function(){return{scrollTop:a.scrollTop-H*a.clientHeight}},c=function(){return{scrollTop:a.scrollTop+H*a.clientHeight}},d=function(){return 0<a.scrollTop},e=function(){return a.scrollTop+a.clientHeight<a.scrollHeight-1}):(b=function(){return{scrollLeft:a.scrollLeft-H*a.clientWidth}},c=function(){return{scrollLeft:a.scrollLeft+H*a.clientWidth}},d=function(){return 0<a.scrollLeft},
e=function(){return a.scrollLeft+a.clientWidth<a.scrollWidth-1});D={scrollBackFactory:b,scrollForthFactory:c,canScrollBack:d,canScrollForth:e}})();z=WAVE.id(y.divMainImageId);M=WAVE.id(y.divThumbsContainerId);$(z).on("mousedown touchstart",function(a){if(!p(a))return v(a);I=!0;return v(a)});$(z).on("mousemove touchmove",function(a){I&&p(a);return v(a)});$(M).on("mousedown touchstart",function(a){B=d(a);return v(a)});$(M).on("mousemove touchmove",function(a){if(null!=B){var b=WAVE.id(y.divThumbsImagesContainerId),
c,e=d(a);t()?(c=e.y-B.y,b.scrollTop+=-c):(c=e.x-B.x,b.scrollLeft+=-c);B=e;h()}return v(a)});(function(){var a=WAVE.id(y.divThumbsImagesContainerId),b=WAVE.id(y.divNavBackId),c=WAVE.id(y.divNavForthId);$(b).on("click touchend",function(){G||(G=!0,$(a).animate(D.scrollBackFactory(),function(){h();G=!1}))});$(c).on("click touchend",function(){G||(G=!0,$(a).animate(D.scrollForthFactory(),function(){h();G=!1}))})})();m(y.imgMainImageId);0<J.length&&r(J[0].bigImageSrc)();for(L=0;L<J.length;L++)E=J[L],a(E),
z=WAVE.id(E.imageId),$(z).on("click touchend",r(E.bigImageSrc)),K(E);$(window).resize(function(){n()});$(document).on("mouseup touchend",function(a){null!=B&&(l(),B=null);I&&(m(y.imgMainImageId),I=!1);return v(a)})};return f}();
WAVE.RecordModel.GUI=function(){function f(b){var d=WAVE.genAutoincKey("__wv.rm.gui");return"_"+b.recView().ID()+"_"+d}function n(g){var d=g.field(),t=g.DIV(),k="tb"+f(g),m=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:k,about:d.about(),cls:(d.required()?e.CLS_REQ:"")+" "+(d.isGUIModified()?e.CLS_MOD:"")}),a=d.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:a}));a=d.kind();a=d.password()?"password":a==WAVE.RecordModel.KIND_SCREENNAME?
"text":a;m+=WAVE.strHTMLTemplate("<input id='@id@' type='@tp@' name='@name@' @disabled@ @maxlength@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:k,tp:a,name:d.name(),disabled:d.isEnabled()?"":"disabled",maxlength:0>=d.size()?"":"maxlength="+d.size(),readonly:d.readonly()?"readonly":"",value:d.isNull()?"":d.displayValue(),placeholder:WAVE.strEmpty(d.placeholder())?"":d.placeholder(),required:d.required()?"required":""});t.innerHTML=m;WAVE.id(k).__fieldView=g;$("#"+k).change(function(){var a=
this.value;try{this.__fieldView.field().setGUIValue(a),b=null}catch(d){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var e=this;if(b==e||null==b)b=e,setTimeout(function(){e.ERRORED||$(e).blur(function(){$(e).change()});e.focus();e.ERRORED=!0},50)}})}function r(g){var d=g.field(),t=g.DIV(),k="tb"+f(g),m=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:k,about:d.about(),cls:(d.required()?e.CLS_REQ:"")+" "+
(d.isGUIModified()?e.CLS_MOD:"")}),a=d.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:a}));m+=WAVE.strHTMLTemplate("<textarea id='@id@' name='@name@' @disabled@ @maxlength@ @readonly@ placeholder='@placeholder@' @required@>@value@</textarea>",{id:k,name:d.name(),disabled:d.isEnabled()?"":"disabled",maxlength:0>=d.size()?"":"maxlength="+d.size(),readonly:d.readonly()?"readonly":"",value:d.isNull()?"":d.displayValue(),placeholder:WAVE.strEmpty(d.placeholder())?
"":d.placeholder(),required:d.required()?"required":""});t.innerHTML=m;WAVE.id(k).__fieldView=g;$("#"+k).change(function(){var a=this.value;try{this.__fieldView.field().setGUIValue(a),b=null}catch(d){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var e=this;if(b==e||null==b)b=e,setTimeout(function(){e.ERRORED||$(e).blur(function(){$(e).change()});e.focus();e.ERRORED=!0},50)}})}function h(b){var d=b.field(),h=b.DIV(),k=d.lookupDict(),
m=Object.keys(k),a;a="<fieldset>"+WAVE.strHTMLTemplate("<legend class='@cls@'>@about@</legend>",{about:d.about(),cls:(d.required()?e.CLS_REQ:"")+" "+(d.isGUIModified()?e.CLS_MOD:"")});var c=d.validationError();null!==c&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:c}));var c=f(b),l;for(l in Object.keys(k)){var n=m[l],r=k[n],q="rbt"+c+"_"+l;a+=WAVE.strHTMLTemplate("<input id='@id@' type='radio' name='@name@' @disabled@ @readonly@ value='@value@' @required@ @checked@>",
{id:q,name:d.name(),disabled:d.isEnabled()?"":"disabled",readonly:d.readonly()?"readonly":"",value:n,required:d.required()?"required":"",checked:WAVE.strSame(n,d.value())?"checked":""});a+=WAVE.strHTMLTemplate("<label for='@rbtid@'>@about@</label>",{rbtid:q,about:r})}h.innerHTML=a+"</fieldset>";for(l in Object.keys(k))q="rbt"+c+"_"+l,WAVE.id(q).__fieldView=b,$("#"+q).change(function(){var a=this.value,b=this.__fieldView.field();b.readonly()?t(this.__fieldView):b.value(a,!0)})}function A(b){var d=
b.field(),h=b.DIV(),k="chk"+f(b),m="",a=d.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:a}));m+=WAVE.strHTMLTemplate("<label for='@chkid@' class='@cls@'>@about@</label>",{chkid:k,about:d.about(),cls:(d.required()?e.CLS_REQ:"")+" "+(d.isGUIModified()?e.CLS_MOD:"")});m+=WAVE.strHTMLTemplate("<input id='@id@' type='checkbox' name='@name@' value='true' @disabled@ @readonly@  @required@ @checked@>",{id:k,tp:d.password()?"password":"text",name:d.name(),
disabled:d.isEnabled()?"":"disabled",readonly:d.readonly()?"readonly":"",required:d.required()?"required":"",checked:!0===d.value()?"checked":""});h.innerHTML=m;WAVE.id(k).__fieldView=b;$("#"+k).change(function(){var a=this.checked,b=this.__fieldView.field();b.readonly()?t(this.__fieldView):b.value(a,!0)})}function C(b){var d=b.field(),t=b.DIV(),k="cbo"+f(b),m=WAVE.strHTMLTemplate("<label for='@cbid@' class='@cls@'>@about@</label>",{cbid:k,about:d.about(),cls:(d.required()?e.CLS_REQ:"")+" "+(d.isGUIModified()?
e.CLS_MOD:"")}),a=d.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:a}));var m=m+WAVE.strHTMLTemplate("<select id='@id@' name='@name@' @disabled@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:k,name:d.name(),disabled:d.isEnabled()?"":"disabled",readonly:d.readonly()?"readonly":"",value:d.value(),placeholder:WAVE.strEmpty(d.placeholder())?"":d.placeholder(),required:d.required()?"required":""}),a=d.lookupDict(),
c=Object.keys(a),l;for(l in Object.keys(a))m+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:c[l],selected:WAVE.strSame(c[l],d.value())?"selected":"",descr:a[c[l]]});t.innerHTML=m+"</select>";WAVE.id(k).__fieldView=b;$("#"+k).change(function(){var a=this.value;this.__fieldView.field().value(a,!0)})}function x(b){if(!b.PUZZLE){var d=b.field(),t=b.DIV(),k=f(b),m="divPuzzle"+k,k="hiddenPuzzle"+k,a="",c=d.validationError();null!==c&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",
{ec:e.CLS_ERROR,error:c}));a+=WAVE.strTemplate("<div id='@id@' class='@cls@'></div><input id='@idh@' type='hidden' name=@fname@ value=''></input>",{id:m,idh:k,fname:d.name(),cls:e.CLS_PUZZLE});t.innerHTML=a;var t=d.value(),m=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(m),Image:WAVE.strDefault(t.Image,""),Help:WAVE.strDefault(t.Help,""),Question:WAVE.strDefault(t.Question,"")}),l=WAVE.id(k);m.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,function(a){d.value().Answer=a.value();l.value=JSON.stringify(d.value())});
b.PUZZLE=m}}function t(b){var d=e.getControlType(b);WAVE.strSame(d,WAVE.RecordModel.CTL_TP_CHECK)?A(b):WAVE.strSame(d,WAVE.RecordModel.CTL_TP_RADIO)?h(b):WAVE.strSame(d,WAVE.RecordModel.CTL_TP_COMBO)?C(b):WAVE.strSame(d,WAVE.RecordModel.CTL_TP_PUZZLE)?x(b):WAVE.strSame(d,WAVE.RecordModel.CTL_TP_TEXTAREA)?r(b):WAVE.strSame(d,WAVE.RecordModel.CTL_TP_HIDDEN)?b.DIV().innerHTML=WAVE.strHTMLTemplate("<input type='hidden' name='@fName@' value='@fValue@'>",{fName:b.field().name(),fValue:b.field().displayValue()}):
n(b)}var e={UNDEFINED:"undefined",CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle"},b=null;e.getControlType=function(b){return b.getOrInferControlType()};e.buildFieldViewAnew=function(b){t(b)};e.eventNotifyFieldView=function(b,d,e,k){t(b)};return e}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function f(f){return Math.log(f)/Math.LN10}var n={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},r=WAVE.Geometry;n.DataType={NUMBER:0,DATE:1};n.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32};n.SquareFillType={TOP:1,BOTTOM:2};n.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};n.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};n.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};n.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2};var h=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,15768E4,31536E4,63072E4,15768E5]);
n.dvInfo=function(t,e,b,g,d){var h=t instanceof Date;this.isDate=function(){return h};var k=t;this.d0=function(a){"undefined"!=typeof a&&(k=a);return k};var m=e;this.d1=function(a){"undefined"!=typeof a&&(m=a);return m};var a=b;this.v0=function(b){"undefined"!=typeof b&&(a=b);return a};var c=g;this.v1=function(a){"undefined"!=typeof a&&(c=a);return c};var l=d;this.isLinear=function(a){"undefined"!=typeof a&&(l=a);return l};if(d)if(h){var n=(e.getTime()-t.getTime())/(g-b);this.d2v=function(a){return Math.floor(b+
(a.getTime()-t.getTime())/n)};this.v2d=function(a){return new Date(Math.ceil(t.getTime()+(a-b)*n))}}else n=(e-t)/(g-b),this.d2v=function(a){return b+(a-t)/n},this.v2d=function(a){return t+(a-b)*n};else if(h){d=f(t.getTime());e=f(e.getTime());var r=(g-b)/(e-d),q=b-r*d;this.d2v=function(a){return Math.floor(1>=a.getTime()?0:r*f(a.getTime())+q)};this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-q)/r)))}}else d=f(0>=t?1:t),e=f(0>=e?1:e),r=(g-b)/(e-d),q=b-r*d,this.d2v=function(a){return Math.floor(1>=
a?0:r*f(a)+q)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-q)/r))}};n.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};n.Axis=function(f,e){var b=this;WAVE.extend(b,WAVE.EventManager);e=e||{};this.chart=function(){return f};var g=e.dataType||n.DataType.NUMBER;this.dataType=function(a){"undefined"!=typeof a&&a!==g&&(g=a,b.fireChanged());return g};var d=e.min||null;this.min=function(a){"undefined"!==
typeof a&&a!==d&&(d=a,b.fireChanged());return d};var h=e.max||null;this.max=function(a){"undefined"!==typeof a&&a!==h&&(h=a,b.fireChanged());return h};var k=e.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==k&&(k=a,b.fireChanged());return k};var m=e.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==m&&(m=a,b.fireChanged());return m};var a=!1!==e.isLinear;this.isLinear=function(c){"undefined"!=typeof c&&c!==a&&(a=c,b.fireChanged());
return a};var c=e.markType||n.AxisMarkType.AUTO;this.markType=function(a){"undefined"!==typeof a&&a!==c&&(c=a,b.fireChanged());return c};var l=5;this.tickLength=function(a){"undefined"!=typeof a&&a!==l&&(l=a,b.fireChanged());return l};var r=e.tickTextMargin||3;this.tickTextMargin=function(a){"undefined"!=typeof a&&a!==fVerticalMargin&&(r=a,b.fireChanged());return r};var x;this.dvInfo=function(a){"undefined"!=typeof a&&(x=a);return x};var q;this.ticks=function(a){"undefined"!==typeof a&&(q=a);return q};
this.fireChanged=function(){b.eventInvoke("EVT_CHANGED")}};n.Axis.prototype.toSeconds=function(f){return f.valueOf()/1E3};n.Axis.prototype.fromSeconds=function(f){return new Date(1E3*f)};n.Axis.prototype.getVTimeTicks=function(f,e,b,g,d,h){b=this.toSeconds(b);var k=this.toSeconds(g)-b,m=e-f;g=k/m;var k=this.calcTimeTickLength(m,k,d,h),a=k.dThreshhold,k=k.vTickLength,a=(Math.floor(b/a)*a-b)/g,c=[],l=h+d/2;for(d=m-(h+d/2);a<=e;)a>=l&&a<=d&&c.push({vTick:f+a,dTick:this.fromSeconds(b+a*g)}),a+=k;return c};
n.Axis.prototype.calcTimeTickLength=function(f,e,b,g){var d=e/f,u=e/Math.floor(f/(b+2*g));f=h.wFirst(function(b){return u<b});return{vTickLength:f/d,dThreshhold:f}};n.Axis.prototype.getVLog10Ticks=function(f,e,b,g,d,h){var k=e-f;g=Math.ceil(Math.log(g-b)/Math.LN10);e=k/g;var m=[],a=h+d/2;d=k-(h+d/2);h=0;for(var k=f,c=1;h<=g;h++,k+=e,c*=10)k>=a&&k<=d&&m.push({vTick:f+k,dTick:b+c});return m};n.Axis.prototype.getVTicks=function(f,e,b,g,d,h){var k=[],m=g-b,a=e-f;g=m/a;var m=this.calcTicksLength(a,m,d,
h),c=m.dTickLength,m=m.vTickLength,c=(Math.ceil(b/c)*c-b)/g,l=h+d/2;for(d=a-(h+d/2);c<=e;)c>=l&&c<=d&&k.push({vTick:f+c,dTick:b+c*g}),c+=m;return k};n.Axis.prototype.calcTicksLength=function(f,e,b,g){var d=e/f,h=WAVE.arrayWalkable([1,2,3,5,10]);f=e/(Math.floor(f/(b+g))-1);e=Math.pow(10,Math.floor(Math.log(f)/Math.LN10));var k=f/e,h=h.wFirst(function(b){return k<b})*e;return{vTickLength:h/d,dTickLength:h}};n.Axis.prototype.labelValToStr=function(f){return this.dataType()==n.DataType.NUMBER?WAVE.siNum(f,
2):WAVE.toUSDateTimeString(f)};n.Axis.prototype.calcLabelRc=function(f,e,b){this.dataType()==n.DataType.NUMBER?(e=this.labelValToStr(e),b=this.labelValToStr(b),b=b.length>=e.length?b:e):b=this.labelValToStr(e);b=WAVE.SVG.createText(b,0,0,{class:"wvAxisLabel wvXAxisLabel",visibility:"hidden"});f.appendChild(b);e=b.getBBox();f.removeChild(b);return e};n.XZone=function(f){var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return f};var b=!0;this.enabled=function(g){"undefined"!=typeof g&&
g!==b&&(b=g,e.eventInvoke("EVT_CHANGED"));return b}};n.XZone.prototype.getHeight=function(f){var e=this.chart().seriesListWalkable().wGroup(function(b){return b.xAxis()},function(b){return b.dataSet()}),b=WAVE.arrayWalkable(e.wSelect(function(b){return{axis:b.k,height:b.k.getHeight(f,b.v)}}).wToArray()).wGroup(function(b){return b.axis.isBottom()},function(b){return b.height}).wGroupAggregate(function(b,e,g){return(e||0)+g}),e={top:0,bottom:0};if(!this.enabled())return e;for(b=b.getWalker();b.moveNext();){var g=
b.current();!0===g.k?e.bottom=g.v:e.top=g.v}return e};n.XZone.prototype.draw=function(f,e){for(var b in e){var g=e[b],g=WAVE.SVG.createRect(g.left(),g.top(),g.width(),g.height(),{class:"wvSvgBkgr wvXZoneBackground"});f.appendChild(g)}b=this.chart().seriesListWalkable().wGroup(function(a){return a.xAxis()},function(a){return a.dataSet()}).getWalker();for(var g=e.top.bottom(),d=e.bottom.top();b.moveNext();){var h=b.current(),k=h.k.getHeight(f,h.v),m;1==h.k.isBottom()?(m=new r.Rectangle(new r.Point(e.bottom.left(),
d),new r.Point(e.bottom.right(),d+k)),d+=k):(m=new r.Rectangle(new r.Point(e.top.left(),g-k),new r.Point(e.top.right(),g)),g-=k);h.k.draw(f,m,h.v)}};n.XAxis=function(f,e){n.Axis.call(this,f,e);var b=this;e=e||{};var g=e.verticalMargin||3;this.verticalMargin=function(d){"undefined"!=typeof d&&d!==g&&(fverticalMargin=d,b.fireChanged());return g};var d=!1!==e.isBottom;this.isBottom=function(e){"undefined"!=typeof e&&e!==d&&(d=e,b.fireChanged());return d}};n.XAxis.prototype=Object.create(n.Axis.prototype);
n.XAxis.prototype.constructor=n.XAxis;n.XAxis.prototype.d2v=function(f){return this.dvInfo().d2v(f)};n.XAxis.prototype.v2d=function(f){return this.dvInfo().v2d(f)};n.XAxis.prototype.draw=function(f,e,b){var g=this.getMinMax(b);this.dvInfo(new n.dvInfo(g.min,g.max,e.left(),e.right(),this.isLinear()));g=this.isBottom()?WAVE.SVG.createLine(e.left(),e.top(),e.right(),e.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),e.bottom(),e.right(),e.bottom(),{class:"wvAxisLine"});f.appendChild(g);this.markAxis(f,
e,b)};n.XAxis.prototype.getHeight=function(f,e){this.minMax=this.getMinMax(e);var b;!this.minMax.min&&0!=this.minMax.min||!this.minMax.max&&0!=this.minMax.max?b=0:(b=this.calcLabelRc(f,this.minMax.min,this.minMax.max),b=Math.ceil(b.height));return this.tickLength()+this.verticalMargin()+this.tickTextMargin()+b};n.XAxis.prototype.getMinMax=function(f){var e=this.min()||f.wSelect(function(b){return b.getMinX()}).wWhere(function(b){return null!=b}).wMin();null===e&&(e=this.dataType()==n.DataType.DATE?
new Date:0);e=this.dataType()==n.DataType.DATE?new Date(e.getTime()-1E3*this.minMargin()):e-this.minMargin();f=this.max()||f.wSelect(function(b){return b.getMaxX()}).wMax();null===f&&(f=this.dataType()==n.DataType.DATE?new Date:0);f=this.dataType()==n.DataType.DATE?new Date(f.getTime()+1E3*this.maxMargin()):f+this.maxMargin();return this.minMax={min:e,max:f}};n.XAxis.prototype.markAxis=function(f,e,b){var g,d=this.getMinMax(b);if((this.minMax.min||0==this.minMax.min)&&(this.minMax.max||0==this.minMax.max)){var h=
this.calcLabelRc(f,d.min,d.max),k=h.width,h=h.height;if(this.markType()==n.AxisMarkType.AUTO)g=this.dataType()==n.DataType.DATE?this.getVTimeTicks(e.left(),e.right(),d.min,d.max,k,5):this.getVTicks(e.left(),e.right(),d.min,d.max,k,5);else if(this.markType()==n.AxisMarkType.EXACT_BY_POINTS){b=b[0];g=[];for(var m in b)d=b[m],g.push({vTick:this.d2v(d.x),dTick:d.x})}this.ticks(g);for(m in g)b=g[m],d=this.isBottom()?WAVE.SVG.createLine(b.vTick,e.top(),b.vTick,e.top()+this.tickLength(),{class:"wvAxisTickLine"}):
WAVE.SVG.createLine(b.vTick,e.bottom(),b.vTick,e.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),f.appendChild(d),d=this.labelValToStr(b.dTick),d=this.isBottom()?WAVE.SVG.createText(d,b.vTick,e.top()+this.tickTextMargin()+h,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(d,b.vTick,e.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),f.appendChild(d),k=d.getBBox(),d.setAttribute("x",b.vTick-k.width/2)}};n.YZone=function(f){var e=this;WAVE.extend(e,WAVE.EventManager);
this.chart=function(){return f};var b=!0;this.enabled=function(g){"undefined"!=typeof g&&g!==b&&(b=g,e.eventInvoke("EVT_CHANGED"));return b};this.getWidth=function(g){var d=e.chart().seriesListWalkable().wGroup(function(b){return b.yAxis()},function(b){return b.dataSet()}),f=WAVE.arrayWalkable(d.wSelect(function(b){return{axis:b.k,width:b.k.getWidth(g,b.v)}}).wToArray()).wGroup(function(b){return b.axis.isLeft()},function(b){return b.width}).wGroupAggregate(function(b,a,c){return(a||0)+c}),d={left:0,
right:0};if(!b)return d;for(f=f.getWalker();f.moveNext();){var k=f.current();!0===k.k?d.left=k.v:d.right=k.v}return d};this.draw=function(b,d){for(var f in d){var k=d[f],k=WAVE.SVG.createRect(k.left(),k.top(),k.width(),k.height(),{class:"wvSvgBkgr wvYZoneBackground"});b.appendChild(k)}f=e.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var k=d.left.right(),m=d.right.left();f.moveNext();){var a=f.current(),c=a.k.getWidth(b,a.v),l;1==
a.k.isLeft()?(l=new r.Rectangle(new r.Point(k-c,d.left.top()),new r.Point(k,d.left.bottom())),k-=c):(l=new r.Rectangle(new r.Point(m,d.left.top()),new r.Point(m+c,d.left.bottom())),m+=c);a.k.draw(b,l,a.v)}}};n.YAxis=function(f,e){n.Axis.call(this,f,e);var b=this;e=e||{};var g=e.horizontalMargin||3;this.horizontalMargin=function(d){"undefined"!=typeof d&&d!==g&&(g=d,b.fireChanged());return g};var d=e.minWidth||0;this.minWidth=function(e){"undefined"!=typeof e&&e!==d&&(d=e,b.fireChanged());return d};
var h=!1!==e.isLeft;this.isLeft=function(d){"undefined"!=typeof d&&d!==h&&(h=d,b.fireChanged());return h}};n.YAxis.prototype=Object.create(n.Axis.prototype);n.YAxis.prototype.constructor=n.YAxis;n.YAxis.prototype.d2v=function(f){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(f)};n.YAxis.prototype.v2d=function(f){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-f)};n.YAxis.prototype.markAxis=function(f,e,b){var g;if(this.markType()==n.AxisMarkType.AUTO){g=this.getMinMax(b);
b=this.calcLabelRc(f,g.min,g.max).height;var d=.2*b;g=this.dataType()==n.DataType.DATE?this.getVTimeTicks(e.top(),e.bottom(),g.min,g.max,b,d):this.isLinear()?this.getVTicks(e.top(),e.bottom(),g.min,g.max,b,d):this.getVLog10Ticks(e.top(),e.bottom(),g.min,g.max,b,d)}else if(this.markType()==n.AxisMarkType.EXACT_BY_POINTS){b=b[0];for(var h in b)d=b[h],g.push({vTick:this.d2v(d.y),dTick:d.y})}this.ticks(g);b=0;d=[];for(h in g){var k=g[h],m=e.top()+e.bottom()-k.vTick,a;a=this.isLeft()?WAVE.SVG.createLine(e.right()-
this.tickLength(),m,e.right(),m,{class:"wvAxisTickLine"}):WAVE.SVG.createLine(e.left(),m,e.left()+this.tickLength(),m,{class:"wvAxisTickLine"});f.appendChild(a);k=this.labelValToStr(k.dTick);k=this.isLeft()?WAVE.SVG.createText(k,e.right()-this.tickTextMargin()-this.tickLength(),m,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(k,e.left()+this.tickLength()+this.tickTextMargin(),m,{class:"wvAxisLabel wvYAxisLabel"});f.appendChild(k);a=k.getBBox();k.setAttribute("y",m+a.height/3);d.push(k);a.width>
b&&(b=a.width)}if(!this.isLeft())for(h in d)f=d[h],e=parseFloat(f.getAttribute("x")),e+=b,f.setAttribute("x",e)};n.YAxis.prototype.draw=function(f,e,b){var g=this.getMinMax(b);this.dvInfo(new n.dvInfo(g.min,g.max,e.top(),e.bottom(),this.isLinear()));g=this.isLeft()?WAVE.SVG.createLine(e.right(),e.top(),e.right(),e.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),e.top(),e.left(),e.bottom(),{class:"wvAxisLine"});f.appendChild(g);this.markAxis(f,e,b)};n.YAxis.prototype.getWidth=function(f,
e){this.minMax=this.getMinMax(e);var b=this.calcLabelRc(f,this.minMax.min,this.minMax.max),b=this.tickLength()+this.horizontalMargin()+Math.ceil(b.width);return Math.max(b,this.minWidth())};n.YAxis.prototype.getMinMax=function(f){var e=this.min()||f.wSelect(function(b){return b.getMinY()}).wWhere(function(b){return null!=b}).wMin(),e=this.dataType()==n.DataType.DATE?new Date(e.getTime()-1E3*this.minMargin()):e-this.minMargin();f=this.max()||f.wSelect(function(b){return b.getMaxY()}).wMax();f=this.dataType()==
n.DataType.DATE?new Date(f.getTime()+1E3*this.maxMargin()):f+this.maxMargin();return this.minMax={min:e,max:f}};n.LZone=function(f,e){function b(){g.eventInvoke("EVT_CHANGED")}e=e||{};var g=this;WAVE.extend(g,WAVE.EventManager);this.chart=function(){return f};var d=!1!==e.enabled;this.enabled=function(a){"undefined"!=typeof a&&a!==d&&(d=a,b());return d};var h=e.legendMargin||10;this.legendMargin=function(a){"undefined"!=typeof a&&a!==h&&(h=a,b());return h};var k=e.seriesMargin||3;this.seriesMargin=
function(a){"undefined"!=typeof a&&a!==k&&(k=a,b());return k};var m=e.prefixLength||10;this.prefixLength=function(a){"undefined"!=typeof a&&a!==m&&(m=a,b());return m};var a=e.rowSpace||3;this.rowSpace=function(c){"undefined"!=typeof c&&c!==a&&(a=c,b());return a};var c=e.corner||n.RectCorner.RIGHTTOP;this.corner=function(a){"undefined"!=typeof a&&a!==c&&(c=a,b());return c}};n.LZone.prototype.getSize=function(f){var e=this.chart().seriesListWalkable().wSelect(function(b){return b.title()||""}).wMax(function(b,
d){return b.length>d.length}),b=WAVE.SVG.createText(e,0,0,{class:"wvLegendName",visibility:"hidden"});f.appendChild(b);e=b.getBBox();f.removeChild(b);f=this.rowSpace()+this.prefixLength()+this.rowSpace()+e.width+this.rowSpace();e=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+e.height);return{w:f,h:e}};n.LZone.prototype.drawLegendPrefix=function(f,e,b){var g=(e.top()+e.bottom())/2;e=WAVE.SVG.createPath({d:"M"+e.left()+","+g+" L"+(e.left()+this.prefixLength())+","+g,class:b.lineClass()});
f.appendChild(e)};n.LZone.prototype.draw=function(f,e){if(this.enabled()){var b=this,g=this.chart().seriesListWalkable(),d=WAVE.SVG.createRect(e.left(),e.top(),e.width(),e.height(),{class:"wvLZoneBackground"});f.appendChild(d);var h=e.top()+this.seriesMargin();g.wEach(function(d){var g=WAVE.SVG.createGroup({class:d.class()});f.appendChild(g);var a=WAVE.SVG.createText(d.title(),e.left()+b.rowSpace()+b.prefixLength()+b.rowSpace(),h,{class:"wvLegendName"});g.appendChild(a);var c=a.getBBox();a.setAttribute("y",
h+3*c.height/4);a=new r.Rectangle(new r.Point(e.left()+b.rowSpace(),h),new r.Point(e.left()+b.rowSpace()+b.prefixLength(),h+c.height));b.drawLegendPrefix(g,a,d);h+=c.height+2*b.seriesMargin()})}};var A=0;n.SZone=function(f,e){function b(){g.eventInvoke("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);e=e||{};this.chart=function(){return f};var d=e.chartType||n.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==d&&(d=a,b());return d};var h=e.squareFillType||n.SquareFillType.BOTTOM;
this.squareFillType=function(a){"undefined"!==typeof a&&a!==h&&(h=a,b());return h};var k=e.pointType||n.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==k&&(k=a,b());return k};var m=e.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==m&&(m=a,b());return m};var a=e.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=function(c){"undefined"!==typeof c&&c!==a&&(a=c,b());return a};var c=e.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==
typeof a&&a!==c&&(c=a,b());return c};var l=e.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==l&&(l=a,b());return l};var r=e.barClass||"wvSeriesRect";this.barClass=function(a){"undefined"!==typeof a&&a!==r&&(r=a,b());return r};var x=e.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==x&&(x=a,b());return x};var q=e.barGroupMargin||5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==q&&(q=a,b());return q};var K=e.barMargin||3;this.barMargin=function(a){"undefined"!==
typeof a&&a!==q&&(K=a,b());return K};var A=e.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==A&&(A=a);return A};var p=e.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==p&&(p=a);return p};var v=e.showPointTitle||!1;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==v&&(v=a,b());return v};var P=e.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==
typeof a&&a!==P&&(P=a,b());return P};var z=e.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==z&&(z=a,b());return z};var y=e.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==y&&(y=a,b());return y};var I=e.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==I&&(I=a,b());return I};var G=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==G&&(G=a,b());return G};
this.showDefaultRuler=function(a){var c=0<B.length;return"undefined"!==typeof a&&a!==c?(a?g.attachToRulerScope(""):g.detachFromRulerScope(""),B.length&&b(),a):c};var B=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(B)};this.attachToRulerScope=function(a){-1===B.indexOf(a)&&(B.push(a),b())};this.detachFromRulerScope=function(a){a=B.indexOf(a);-1!==a&&(B.splice(a,1),b())};var D=!1!==e.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==D&&(D=a,b());return D};
var F=!1!==e.rulerCheckYContains;this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==F&&(F=a,b());return F};var H=null;this.lastArea=function(){return H};var J=[],C=WAVE.arrayWalkable(J),W=[],S=WAVE.arrayWalkable(W),N=[],M=WAVE.arrayWalkable(N);this.addVTitle=function(a){J.push(a)};this.addVPoint=function(a){W.push(a)};this.addVLine=function(a){N.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=C.wWhere(function(b){return!(b.right()<
a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),e=S.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),g=M.wWhere(function(b){return!(b.x2<a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,
b.y1,b.x2,b.y2)}).wSum();return c+d+e+2*g};this.draw=function(a,b){H=b;J.splice(0,J.length);W.splice(0,W.length);N.splice(0,N.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var e=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});
a.appendChild(e);var c=g.chart().seriesListWalkable(),d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),f=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});e.appendChild(d)}});f.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});
e.appendChild(d)}});c.wGroup(function(a){return a.chartType()},function(a){return a}).wEach(function(c){switch(c.k){case n.ChartType.BAR:var d=g.barWidth(),f=g.barGroupMargin(),k=g.barMargin(),l=c.v.wCount(),h=c.v.wFirst();if(h.barBase()==n.RectSide.BOTTOM){var m=c.v.wMin(function(a,b){return a.dataSet().getMinX()<a.dataSet().getMinX()});if("undefined"==typeof m)break;var t=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>a.dataSet().getMaxX()});if("undefined"==typeof t)break;for(var m=m.dataSet().getMinX(),
t=t.dataSet().getMaxX(),q=h.xAxis().dvInfo(),h=q.d2v(m),t=q.d2v(t),l=Math.floor((t-h+f)/(l*(d+k)-k+f)),f=(t-h+f)/l,t=0;t<l;t++){var p=h+f*t,u=p;c.v.wEach(function(a){var c=q.v2d(p),c=a.getVY(c),c="M"+u+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});e.appendChild(a);a.appendChild(c);u+=d+k})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawAllButTitle(a,
d,b)})}});c.wWhere(function(a){return a.chartType()&n.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawPointTitles(a,d,b)})}};var C=function(f,e){function b(){g.invokeEvent("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);e=e||{};this.chart=function(){return f};var d="undefined"!==typeof e.id?e.id:(++A).toString();this.id=function(){return d};var h=e.title||"";this.title=function(a){"undefined"!=typeof a&&a!==h&&(h=a,b());return h};
var k=e.class||"";this.class=function(a){"undefined"!=typeof a&&a!==k&&(k=a,b());return k};var m=e.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==m&&(m=a,b());return m||g.chart().sZone().lineClass()};var a=e.lineSquareClass;this.lineSquareClass=function(c){"undefined"!==typeof c&&c!==a&&(a=c,b());return a||g.chart().sZone().lineSquareClass()};var c=e.barClass;this.barClass=function(a){"undefined"!==typeof a&&a!==c&&(c=a,b());return c||g.chart().sZone().barClass()};var l=e.chartType;
this.chartType=function(a){"undefined"!==typeof a&&a!==l&&(l=a,b());return l||g.chart().sZone().chartType()};var r=e.squareFillType;this.squareFillType=function(a){"undefined"!==typeof a&&a!==r&&(r=a,b());return r||g.chart().sZone().squareFillType()};var x=e.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==x&&(x=a,b());return x||g.chart().sZone().pointType()};var q=e.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==q&&(q=a,b());return q||g.chart().sZone().pointClass()};
var K=e.pointSize;this.pointSize=function(a){"undefined"!==typeof a&&a!==K&&(K=a,b());return K||g.chart().sZone().pointSize()};var C=n.RectSide.BOTTOM;this.barBase=function(a){"undefined"!=typeof a&&a!==C&&(C=a,b());return C||g.chart().sZone().barBase()};var p=new n.DataSet;p.eventBind("EVT_CHANGED",function(){g.eventInvoke("EVT_CHANGED")});this.dataSet=function(){return p};var v=e.xAxis;this.xAxis=function(a){"undefined"!=typeof a&&a!==v&&(v&&v.eventUnbind("EVT_CHANGED",b),v=a,v.eventBind("EVT_CHANGED",
b),b());return v||g.chart().xAxis()};var P=e.yAxis;this.yAxis=function(a){"undefined"!=typeof a&&a!==P&&(P&&P.eventUnbind("EVT_CHANGED",b),P=a,P.eventBind("EVT_CHANGED",b),b());return P||g.chart().yAxis()};var z=e.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==z&&(z=a);return z||g.chart().sZone().showPointTooltip()};var y=e.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==y&&(y=a);return y||g.chart().sZone().pointTooltipFormat()};var I=
e.showPointTitle;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==I&&(I=a,b());return I||g.chart().sZone().showPointTitle()};var G=e.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==G&&(G=a,b());return G||g.chart().sZone().pointTitleFormat()};var B=e.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==B&&(B=a,b());return B||f.sZone().pointTitleClass()};var D=e.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==typeof a&&
a!==D&&(D=a,b());return D||f.sZone().pointTitleAngle()};var F=e.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==F&&(F=a,b());return F||f.sZone().pointTitleMargin()};var H=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==H&&(H=a,b());return!1===H?!1:H||f.sZone().showPointTitleLeg()}};C.prototype.getDY=function(f){var e=this.dataSet().getPointByX(f);if(null!=e)return e.y;e=this.dataSet().getNearestNeighbours(f);return null==e?null:
null==e.left?e.right.y:null==e.right?e.left.y:(f-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y};C.prototype.getVY=function(f){f=this.getDY(f);return this.yAxis().d2v(f)};C.prototype.foreachPoint=function(f){var e=this,b=this.xAxis(),g=this.yAxis();e.dataSet().forEach(function(d){var h=Math.round(b.d2v(d.x)),k=Math.round(g.d2v(d.y));isNaN(h)||isNaN(k)||f(h,k,d.x,d.y,d.title,e)})};C.prototype.drawAllButTitle=function(f,e,b,g){var d=this;if(this.chartType()&n.ChartType.LINE||this.chartType()&
n.ChartType.LINE_SQUARE){var h="",k=null,m,a;d.foreachPoint(function(b,c,e,f,g,l){null==k?(k=b,isFirst=!1,e="M"):(e="L",d.chart().sZone().addVLine({x1:m,y1:a,x2:b,y2:c}));h+=e+b+","+c+" ";m=b;a=c});""!=h&&this.chartType()&n.ChartType.LINE_SQUARE&&(h=this.squareFillType()==n.SquareFillType.BOTTOM?h+("V"+b.bottom()+" H"+k+" Z"):h+("V"+b.top()+" H"+k+" Z"));g=WAVE.SVG.createPath({d:h,class:this.chartType()&n.ChartType.LINE_SQUARE?this.lineSquareClass():this.lineClass()});e.appendChild(g)}if(this.chartType()&
n.ChartType.SPLINE||this.chartType()&n.ChartType.SPLINE_SQUARE){var h="",c="M",l=0,r=[],k=null;d.foreachPoint(function(a,b,d,e,f,g){null==k&&(k=a);"M"==c?(h="M"+a+","+b+" ",c="C"):"C"==c?(r.unshift({x:a,y:b}),l++,3==l&&(a=r.pop(),b=r.pop(),d=r.pop(),h+="C"+a.x+","+a.y+" "+b.x+","+b.y+" "+d.x+","+d.y+" ",l=0,c="S")):"S"==c&&(r.unshift({x:a,y:b}),l++,2==l&&(b=r.pop(),d=r.pop(),h+="S"+b.x+","+b.y+" "+d.x+","+d.y+" ",l=0))});if("C"==c)if(1==l)g=r.pop(),h+="L"+g.x+","+g.y;else{if(2==l){g=r.pop();var x=
r.pop(),h=h+("Q"+g.x+","+g.y+" "+x.x+","+x.y)}}else"S"==c&&1==l&&(g=r.pop(),h+="T"+g.x+","+g.y);""!=h&&this.chartType()&n.ChartType.SPLINE_SQUARE&&(h+="V"+b.bottom()+" H"+k+" Z");g=WAVE.SVG.createPath({d:h,class:this.chartType()&n.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});e.appendChild(g)}this.chartType()&n.ChartType.POINT&&d.foreachPoint(function(a,c,g,h,l,k){d.drawPoint(f,e,b,a,c,g,h,l,k)})};C.prototype.drawPointTitles=function(f,e,b){var g=this;this.chartType()&n.ChartType.POINT&&
this.foreachPoint(function(d,h,k,m,a,c){g.drawPointTitle(f,e,b,d,h,k,m,a)})};C.prototype.drawPoint=function(f,e,b,g,d,h,k,m){var a;switch(this.pointType()){case n.PointType.CIRCLE:a=this.drawPointCircle(g,d,h,k);break;case n.PointType.RECT:a=this.drawPointRect(g,d,h,k);break;case n.PointType.TRI:a=this.drawPointTriangle(g,d,h,k)}var c=this;a&&(a.addEventListener("mouseover",function(a){c.chart().onSeriesMouseOver({originalEvt:a,vx:g,vy:d,dx:h,dy:k,title:m,series:c})}),a.addEventListener("mouseout",
function(a){c.chart().onSeriesMouseOut({originalEvt:a,vx:g,vy:d,dx:h,dy:k,title:m,series:c})}),a.addEventListener("click",function(a){c.chart().onSeriesClick({originalEvt:a,vx:g,vy:d,dx:h,dy:k,title:m,series:c})}),e.appendChild(a))};C.prototype.drawPointTitle=function(f,e,b,g,d,h,k,m){if(this.showPointTitle()&&m){var a=WAVE.strTemplate(this.pointTitleFormat(),{vx:g,vy:d,dx:h,dy:k,title:m,series:this.title()}),c=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+
","+g+","+d+")"}),a=WAVE.SVG.createText(a,g,d);c.appendChild(a);f.appendChild(c);var l=c.getBBox();f.removeChild(c);var n=l.x,r=l.y,q=l.width,x=l.height,n=n-2,r=r-2,q=q+4,x=x+4,l=g-n;f=d-r;for(var A=d-(r+x/2),p=g+this.pointTitleMargin(),n=WAVE.Geometry.toRectWH(n+(p-n),r+A,q,x),r=this.chart().sZone(),q=Number.MAX_VALUE,x=0;x<2*Math.PI;x+=Math.PI/4){A=WAVE.Geometry.rotateRectAroundCircle(g,d,15,n.width(),n.height(),x);p=r.getTitleRcPenalty(A,b);if(0==p){n=A;break}p<q&&(q=p,n=A)}r.addVTitle(n);b=WAVE.SVG.createRect(n.left(),
n.top(),n.width(),n.height(),{rx:4,ry:4});a.setAttribute("x",n.left()+l);a.setAttribute("y",n.top()+f);var v=this;c.addEventListener("mouseover",function(a){v.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:g,vy:d,dx:h,dy:k,title:m,series:v})});c.addEventListener("mouseout",function(a){v.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:g,vy:d,dx:h,dy:k,title:m,series:v})});c.addEventListener("click",function(a){v.chart().onSeriesPointTitleClick({originalEvt:a,vx:g,vy:d,dx:h,dy:k,title:m,
series:v})});c.insertBefore(b,a);this.showPointTitleLeg()&&(a=(new WAVE.Geometry.Point(g,d)).toPolarPoint(n.centerPoint()).theta(),a=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(n,a),a=WAVE.SVG.createLine(a.x(),a.y(),g,d),c.insertBefore(a,b));e.appendChild(c)}};C.prototype.calcTitlePos=function(f,e,b,g){var d=null,h=null,k,m,a=b.width*b.height;k=f+5;m=e-5-b.height;var c=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),k,m,b.width,b.height);c!=a?(k=f-5-b.width,m=e-5-b.height,
c=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),k,m,b.width,b.height),c!=a?(k=f+5,m=e+5,c=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),k,m,b.width,b.height),c!=a?(k=f-5-b.width,m=e+5,c=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),k,m,b.width,b.height),c==a&&(d=k,h=m)):(d=k,h=m)):(d=k,h=m)):(d=k,h=m);return new WAVE.Geometry.Point(d,h)};C.prototype.drawPointCircle=function(f,e,b,g){b=this.pointSize();g=WAVE.SVG.createCircle(f,e,b,{class:this.pointClass()});
this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(f-b,e-b,2*b,2*b));return g};C.prototype.drawPointRect=function(f,e,b,g){b=this.pointSize();g=WAVE.SVG.createRect(f-b,e-b,2*b,2*b,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(f-b,e-b,2*b,2*b));return g};C.prototype.drawPointTriangle=function(f,e,b,g){b=this.pointSize();g=WAVE.SVG.createPath({d:"M"+(f-b)+","+(e+b)+" H"+(f+b)+" L"+f+","+(e-b)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(f-
b,e-b,2*b,2*b));return g};C.prototype.toString=function(){return"Series "+this.title()};n.DataSet=function(){var f=this;WAVE.extend(f,WAVE.EventManager);var e=[],b=WAVE.arrayWalkable(e);this.feedWalkable=function(b,d){if(!d||d>f.MAX_POINTS_QTY)d=f.MAX_POINTS_QTY;f.removeAllPoints();for(var h=b.getWalker(),k=0;h.moveNext()&&k++<d;){var m=h.current();e.push({x:m.x,y:m.y,t:m.t})}f.eventInvoke("EVT_CHANGED")};this.addPoint=function(b,d,h){e.push({x:b,y:d,title:h});f.eventInvoke("EVT_CHANGED")};this.forEach=
function(e){b.wEach(e)};this.removeAllPoints=function(){0<e.length&&(e.splice(0,e.length),f.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(b){var d;do{d=!1;for(var h=0;h<e.length;h++)if(b(e[h])){e.splice(h,1);d=!0;break}}while(d);f.eventInvoke("EVT_CHANGED")};this.removePointByX=function(b){for(var d=0;d<e.length;d++)if(e[d].x==b){e.splice(d,1);break}};this.length=function(){return e.length};this.getPoint=function(b){return e[b]};this.getPointByX=function(b){for(var d=0;d<e.length;d++){var f=
e[d];if(f.x==b)return f}};this.getMinX=function(){return b.wSelect(function(b){return b.x}).wMin()};this.getMaxX=function(){return b.wSelect(function(b){return b.x}).wMax()};this.getMinY=function(){return b.wSelect(function(b){return b.y}).wMin()};this.getMaxY=function(){return b.wSelect(function(b){return b.y}).wMax()};this.getNearestNeighbours=function(f){if(0==e.length)return null;var d=e[0],h=e[e.length-1];if(f<d.x)return{left:null,right:d};if(f>h.x)return{left:h,right:null};d=b.wFirstIdx(function(b){return f<
b.x});return{left:e[d-1],right:e[d]}}};n.DataSet.prototype.MAX_POINTS_QTY=44100;var x=0;n.Chart=function(f){function e(){K&&0==q&&(d.draw(),K=!1)}function b(){K=!0;e()}function g(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!=c.nodeName?a.removeChild(c):b++}}var d=this;WAVE.extend(d,WAVE.EventManager);var h=++x;this.id=function(){return h};var k=f;this.svgEl=function(){return k};$(window).resize(function(){d.draw()});this.svgEl=function(a){"undefined"!=typeof a&&a!==k&&(k=a,
d.draw());return k};var m=new n.XZone(this);m.eventBind("EVT_CHANGED",b);this.xZone=function(){return m};var a=new n.YZone(this);a.eventBind("EVT_CHANGED",b);this.yZone=function(){return a};var c=new n.SZone(this);c.eventBind("EVT_CHANGED",b);this.sZone=function(){return c};var l=new n.LZone(this);l.eventBind("EVT_CHANGED",b);this.lZone=function(){return l};var w=new n.XAxis(d);w.eventBind("EVT_CHANGED",b);this.xAxis=function(a){"undefined"!=typeof a&&a!==w&&(w=a,d.draw());return w};var A=new n.YAxis(d);
A.eventBind("EVT_CHANGED",b);this.yAxis=function(a){"undefined"!=typeof a&&a!==A&&(A=a,d.draw());return A};var q=0,K=!0;this.beginUpdate=function(){q++};this.endUpdate=function(){0<q&&q--;e()};this.beginUpdate();var O=[],p=WAVE.arrayWalkable(O);this.seriesListWalkable=function(){return p};this.getSeries=function(a){return p.wFirst(function(b){return b.id()==a})};this.addSeries=function(a){a=new C(d,a);a.eventBind("EVT_CHANGED",b);O.push(a);b();return a};this.removeSeries=function(a){var c=p.wFirstIdx(function(b){return b==
a});-1!=c&&(O.splice(c,1),a.eventUnbind("EVT_CHANGED",b),b())};this.clearSeries=function(){if(0!=O.length){for(var a in O)O[a].eventUnbind("EVT_CHANGED",b);O.splice(0,O.length);b()}};this.draw=function(){var a=k.getBoundingClientRect(),b=a.width,c=a.height;try{var e=d.splitArea(k,b,c)}catch(f){console.error(f.message);return}g(k,!0);b=WAVE.SVG.createRect(0,0,b,c,{class:"wvSvgBkgr"});k.appendChild(b);d.xZone().draw(k,e.xZone);d.yZone().draw(k,e.yZone);d.sZone().draw(k,e.sZone);d.lZone().draw(k,e.lZone);
var h=WAVE.Geometry.toRectWH(e.sZone.left()+a.left,e.sZone.top()+a.top,e.sZone.width(),e.sZone.height()),e=d.sZone().rulerScopes();if(0<e.length)for(var l in e)WAVE.GUI.rulerSet({element:k,scope:e[l],elementCfg:{getTxt:function(b){var c=d.xAxis(),e=d.yAxis();d.sZone().lastArea();if(h.contains(b.clientPoint)){var f=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,f=c.v2d(f),g=e.v2d(g);b.divHint.style.visibility="visible";return c.labelValToStr(f)+"; "+e.labelValToStr(g)}b.divHint.style.visibility=
"hidden"},getMasterInfo:function(b){var c=d.xAxis(),e=d.yAxis();d.sZone();var f=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,c=c.v2d(f),e=e.v2d(g),e={dataPoint:new WAVE.Geometry.Point(c,e)};e.isInParentRc=h.contains(b.clientPoint);return e},getSlaveInfo:function(b){var c=d.xAxis(),e=d.yAxis(),f=d.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();c=c.d2v(g)+a.left;e=e.d2v(b)+a.top;e={clientPoint:new WAVE.Geometry.Point(c,e)};e.isInParentRc=(!f.rulerCheckXContains()||e.clientPoint.x()>=
h.left()&&e.clientPoint.x()<=h.right())&&(!f.rulerCheckYContains()||e.clientPoint.y()>=h.top()&&e.clientPoint.y()<=h.bottom());return e},parentRc:h}});else WAVE.GUI.rulerUnset({element:k})};this.splitArea=function(a,b,c){var e=d.xZone().getHeight(a),f=d.yZone().getWidth(a),g=new r.Point(0,0),h=new r.Point(Math.round(b),Math.round(c));e.top&&g.y(g.y()+e.top);e.bottom&&h.y(h.y()-e.bottom);f.left&&g.x(g.x()+f.left);f.right&&h.x(h.x()-f.right);var e={top:new r.Rectangle(new r.Point(g.x(),0),new r.Point(h.x(),
g.y())),bottom:new r.Rectangle(new r.Point(g.x(),h.y()),new r.Point(h.x(),c))},f={left:new r.Rectangle(new r.Point(0,g.y()),new r.Point(g.x(),h.y())),right:new r.Rectangle(new r.Point(h.x(),g.y()),new r.Point(b,h.y()))},k=new r.Rectangle(g,h);0<g.x()&&(k.corner1().x(k.left()+1),e.top.corner1().x(k.left()),e.bottom.corner1().x(k.left()));0<g.y()&&(k.corner1().y(k.top()+1),f.left.corner1().y(k.top()),f.right.corner1().y(k.top()));h.x()<b&&(k.corner2().x(k.right()-1),e.top.corner2().x(k.right()),e.bottom.corner2().x(k.right()));
h.y()<c&&(k.corner2().y(k.bottom()-1),f.left.corner2().y(k.bottom()),f.right.corner2().y(k.bottom()));a=d.lZone().getSize(a);var l,m;switch(d.lZone().corner()){case n.RectCorner.LEFTTOP:l=k.left()+d.lZone().legendMargin();m=k.top()+d.lZone().legendMargin();break;case n.RectCorner.RIGHTTOP:l=k.right()-d.lZone().legendMargin()-a.w;m=k.top()+d.lZone().legendMargin();break;case n.RectCorner.LEFTBOTTOM:l=k.left()+d.lZone().legendMargin();m=k.bottom()-a.h-d.lZone().legendMargin();break;case n.RectCorner.RIGHTBOTTOM:l=
k.right()-d.lZone().legendMargin()-a.w,m=k.bottom()-a.h-d.lZone().legendMargin()}l=new r.Rectangle(new r.Point(l,m),new r.Point(l+a.w,m+a.h));return{xZone:e,yZone:f,sZone:k,lZone:l}};this.endUpdate()};n.Chart.prototype.onSeriesMouseOver=function(f){this.eventInvoke(n.EVT_SERIES_POINT_MOUSEOVER,f)};n.Chart.prototype.onSeriesMouseOut=function(f){this.eventInvoke(n.EVT_SERIES_POINT_MOUSEOUT,f)};n.Chart.prototype.onSeriesClick=function(f){this.eventInvoke(n.EVT_SERIES_POINT_CLICK,f)};n.Chart.prototype.onSeriesPointTitleMouseOver=
function(f){this.eventInvoke(n.EVT_SERIES_POINT_TITLE_MOUSEOVER,f)};n.Chart.prototype.onSeriesPointTitleMouseOut=function(f){this.eventInvoke(n.EVT_SERIES_POINT_TITLE_MOUSEOUT,f)};n.Chart.prototype.onSeriesPointTitleClick=function(f){this.eventInvoke(n.EVT_SERIES_POINT_TITLE_CLICK,f)};return n}();
